<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Viewer & Builder</title>
    <style>
        :root {
            /* Default values */
            --bg-color: #2d1b1b;
            --sidebar-bg: #1f1010;
            --card-bg: #3e2727;
            --text-primary: #fbe9e7;
            --text-secondary: #ffab91;
            --accent-color: #ff7043;
            --accent-hover: #f4511e;
            --glass-bg: rgba(45, 27, 27, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            display: flex;
            height: 100vh;
            overflow: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Sidebar Simulation */
        .sidebar {
            width: 260px;
            background-color: var(--sidebar-bg);
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            border-right: 1px solid var(--glass-border);
            transition: background-color 0.3s;
            flex-shrink: 0;
        }

        .logo {
            font-weight: 800;
            font-size: 1.5em;
            margin-bottom: 30px;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-item {
            padding: 12px 15px;
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .sidebar-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .sidebar-item.active {
            background-color: var(--card-bg);
            color: var(--accent-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Main Content */
        .main {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            position: relative;
        }

        .header {
            margin-bottom: 40px;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2em;
        }

        .header p {
            color: var(--text-secondary);
            margin: 0;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        /* Cards */
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, background-color 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            margin-top: 0;
            color: var(--text-primary);
            font-size: 1.3em;
        }

        .card p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .card-footer {
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Buttons */
        .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: background-color 0.2s, transform 0.1s;
        }

        .btn:hover {
            background-color: var(--accent-hover);
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--glass-border);
            color: var(--text-primary);
        }

        .btn-outline:hover {
            border-color: var(--text-secondary);
            background-color: rgba(255, 255, 255, 0.05);
        }

        /* Glass Effect */
        .glass-panel {
            background-color: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(12px);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
        }

        /* Controls Editor */
        .editor-container {
            position: fixed;
            right: 0;
            top: 0;
            bottom: 0;
            width: 400px;
            background: #1a1a1a;
            border-left: 1px solid #333;
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            color: #eee;
        }

        .editor-header {
            padding: 20px;
            background: #222;
            border-bottom: 1px solid #333;
        }

        .editor-header h2 {
            margin: 0 0 15px 0;
            font-size: 1.2em;
            display: flex;
            justify-content: space-between;
        }

        .generator-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .generator-controls select {
            flex: 1;
            background: #333;
            color: #eee;
            border: 1px solid #444;
            padding: 8px;
            border-radius: 6px;
        }

        .generator-controls button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .generator-controls button:hover {
            background: #357abd;
        }

        .editor-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .control-group {
            margin-bottom: 15px;
            background: #252525;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #333;
        }

        .control-group label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85em;
            color: #aaa;
            font-family: monospace;
        }

        .lock-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            opacity: 0.3;
            transition: opacity 0.2s;
            padding: 0;
        }

        .lock-btn.locked {
            opacity: 1;
        }

        .control-row {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        input[type="color"] {
            -webkit-appearance: none;
            border: none;
            width: 35px;
            height: 35px;
            cursor: pointer;
            padding: 0;
            background: none;
            border-radius: 6px;
            overflow: hidden;
            flex-shrink: 0;
        }

        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }

        input[type="color"]::-webkit-color-swatch {
            border: none;
            border-radius: 6px;
            border: 1px solid #444;
        }

        input[type="text"] {
            flex: 1;
            background: #111;
            border: 1px solid #444;
            color: #ddd;
            padding: 8px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.9em;
            min-width: 0;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #666;
        }

        .editor-footer {
            padding: 20px;
            background: #222;
            border-top: 1px solid #333;
        }

        pre {
            background: #111;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.8em;
            margin: 0 0 15px 0;
            color: #a5d6ff;
            border: 1px solid #333;
            max-height: 150px;
            overflow-y: auto;
        }

        .action-btn {
            background: #444;
            color: white;
            border: none;
            width: 100%;
            padding: 12px;
            cursor: pointer;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .action-btn:hover {
            background: #555;
        }

        /* Mock UI Elements */
        .mock-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--glass-border);
        }

        .mock-stat:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
    </style>
</head>

<body>

    <div class="sidebar">
        <div class="logo">
            <span style="font-size: 1.5em;">‚ùñ</span> ThemeBuilder
        </div>
        <div class="sidebar-item active">
            <span>üìä</span> Dashboard
        </div>
        <div class="sidebar-item">
            <span>üìÅ</span> Projects
        </div>
        <div class="sidebar-item">
            <span>üìÖ</span> Calendar
        </div>
        <div class="sidebar-item">
            <span>‚öôÔ∏è</span> Settings
        </div>

        <div
            style="margin-top: auto; padding: 20px; background: var(--card-bg); border-radius: 12px; border: 1px solid var(--glass-border);">
            <div style="font-size: 0.8em; color: var(--text-secondary); margin-bottom: 5px;">Pro Plan</div>
            <div style="font-weight: bold; margin-bottom: 10px;">Expires in 3 days</div>
            <button class="btn" style="width: 100%; padding: 8px;">Upgrade</button>
        </div>
    </div>

    <div class="main">
        <div class="header">
            <h1>Theme Preview</h1>
            <p>Adjust the variables on the right to see changes in real-time.</p>
        </div>

        <div class="glass-panel">
            <h2 style="margin-top: 0;">Glassmorphism Container</h2>
            <p>This container uses <code>--glass-bg</code> and <code>--glass-border</code>. It's great for overlays or
                highlighting content on complex backgrounds.</p>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <span
                    style="background: var(--bg-color); padding: 5px 10px; border-radius: 20px; font-size: 0.8em; border: 1px solid var(--glass-border);">Tag
                    1</span>
                <span
                    style="background: var(--bg-color); padding: 5px 10px; border-radius: 20px; font-size: 0.8em; border: 1px solid var(--glass-border);">Tag
                    2</span>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <h3>Primary Card</h3>
                <p>This is a standard card element. Modifying <code>--card-bg</code> will change its appearance.</p>
                <div class="mock-stat">
                    <span>Views</span>
                    <span style="color: var(--accent-color); font-weight: bold;">1,234</span>
                </div>
                <div class="mock-stat">
                    <span>Clicks</span>
                    <span style="color: var(--accent-color); font-weight: bold;">856</span>
                </div>
                <div class="card-footer">
                    <button class="btn">Confirm</button>
                    <button class="btn btn-outline" style="border: none; color: var(--text-secondary);">Cancel</button>
                </div>
            </div>

            <div class="card">
                <h3>Typography check</h3>
                <p style="color: var(--text-primary); margin-bottom: 10px;">This is Primary Text (--text-primary)</p>
                <p style="color: var(--text-secondary);">This is Secondary Text (--text-secondary)</p>
                <p style="color: var(--accent-color);">This is Accent Text (--accent-color)</p>

                <div style="margin-top: 20px;">
                    <button class="btn" style="width: 100%;">Full Width Button</button>
                    <button class="btn btn-outline" style="width: 100%; margin-top: 10px;">Secondary Action</button>
                </div>
            </div>

            <div class="card" style="display: flex; align-items: center; justify-content: center; text-align: center;">
                <div>
                    <div style="font-size: 3em; color: var(--accent-color); margin-bottom: 10px;">‚òÖ</div>
                    <h3>Accent Color</h3>
                    <p>Focus interaction</p>
                    <button class="btn" style="border-radius: 50px;">Rounded Button</button>
                </div>
            </div>
        </div>
    </div>

    <div class="editor-container">
        <div class="editor-header">
            <h2>
                Editor
                <button onclick="resetTheme()"
                    style="background: transparent; border: 1px solid #444; color: #aaa; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 0.7em;">Reset</button>
            </h2>
            <div class="generator-controls">
                <select id="gen-method">
                    <option value="complementary">Complementary</option>
                    <option value="triadic">Triadic</option>
                    <option value="tetradic">Tetradic</option>
                    <option value="analogous">Analogous</option>
                    <option value="split">Split Complementary</option>
                    <option value="monochromatic">Monochromatic</option>
                    <option disabled>‚îÄ‚îÄ Moods ‚îÄ‚îÄ</option>
                    <option value="mood-pastel">Pastel</option>
                    <option value="mood-dark">Dark & Moody</option>
                    <option value="mood-neon">Cyberpunk/Neon</option>
                    <option value="mood-warm">Warm/Earthy</option>
                    <option value="mood-ocean">Ocean/Cool</option>
                </select>
                <button onclick="generateRandom()">üé≤</button>
            </div>
        </div>

        <div class="editor-content" id="controls">
            <!-- Controls generated by JS -->
        </div>

        <div class="editor-footer">
            <pre id="json-output"></pre>
            <button class="action-btn" onclick="copyJSON()">Copy JSON Config</button>
        </div>
    </div>

    <script>
        // --- State ---
        const defaultTheme = {
            "--bg-color": "#2d1b1b",
            "--sidebar-bg": "#1f1010",
            "--card-bg": "#3e2727",
            "--text-primary": "#fbe9e7",
            "--text-secondary": "#ffab91",
            "--accent-color": "#ff7043",
            "--accent-hover": "#f4511e",
            "--glass-bg": "rgba(45, 27, 27, 0.7)",
            "--glass-border": "rgba(255, 255, 255, 0.08)"
        };

        let themeVars = { ...defaultTheme };
        let lockedVars = new Set();

        const controlsDiv = document.getElementById('controls');
        const jsonOutput = document.getElementById('json-output');
        const root = document.documentElement;

        // --- Color Utils ---
        function hslToHex(h, s, l) {
            l /= 100;
            const a = s * Math.min(l, 1 - l) / 100;
            const f = n => {
                const k = (n + h / 30) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color).toString(16).padStart(2, '0');
            };
            return `#${f(0)}${f(8)}${f(4)}`;
        }

        // Simple pseudo-random helper
        const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

        // --- Logic ---

        function updateTheme() {
            let currentJSON = {};
            for (const [key, value] of Object.entries(themeVars)) {
                root.style.setProperty(key, value);
                currentJSON[key] = value;
            }
            jsonOutput.textContent = JSON.stringify(currentJSON, null, 4);
        }

        function createControls() {
            controlsDiv.innerHTML = '';
            for (const [key, value] of Object.entries(themeVars)) {
                const group = document.createElement('div');
                group.className = 'control-group';

                const label = document.createElement('label');

                // Label Text
                const spanText = document.createElement('span');
                spanText.textContent = key;
                label.appendChild(spanText);

                // Lock Button
                const lockBtn = document.createElement('button');
                lockBtn.className = `lock-btn ${lockedVars.has(key) ? 'locked' : ''}`;
                lockBtn.innerHTML = lockedVars.has(key) ? 'üîí' : 'üîì';
                lockBtn.onclick = () => toggleLock(key, lockBtn);
                lockBtn.title = "Lock color during random generation";
                label.appendChild(lockBtn);

                group.appendChild(label);

                const row = document.createElement('div');
                row.className = 'control-row';

                const textInput = document.createElement('input');
                textInput.type = 'text';
                textInput.value = value;

                const colorPicker = document.createElement('input');
                colorPicker.type = 'color';

                // Initialize picker value
                if (value.startsWith('#') && value.length === 7) {
                    colorPicker.value = value;
                } else if (value.startsWith('rgb')) {
                    colorPicker.value = rgbaToHex(value);
                }

                // Event Listeners
                textInput.oninput = (e) => {
                    const newValue = e.target.value;
                    themeVars[key] = newValue;
                    if (newValue.startsWith('#') && newValue.length === 7) {
                        colorPicker.value = newValue;
                    } else if (newValue.startsWith('rgb')) {
                        colorPicker.value = rgbaToHex(newValue);
                    }
                    updateTheme();
                };

                colorPicker.oninput = (e) => {
                    const newHex = e.target.value;
                    let FINAL_VALUE = newHex;
                    // Preserve Alpha for RGBA vars
                    if (themeVars[key].startsWith('rgba')) {
                        FINAL_VALUE = hexToRgbaUpdate(themeVars[key], newHex);
                    }
                    textInput.value = FINAL_VALUE;
                    themeVars[key] = FINAL_VALUE;
                    updateTheme();
                };

                row.appendChild(colorPicker);
                row.appendChild(textInput);
                group.appendChild(row);
                controlsDiv.appendChild(group);
            }
        }

        function toggleLock(key, btn) {
            if (lockedVars.has(key)) {
                lockedVars.delete(key);
                btn.classList.remove('locked');
                btn.innerHTML = 'üîì';
            } else {
                lockedVars.add(key);
                btn.classList.add('locked');
                btn.innerHTML = 'üîí';
            }
        }

        function generateRandom() {
            const method = document.getElementById('gen-method').value;
            const newTheme = {};

            // Base hue
            let h = rand(0, 360);
            let s = rand(20, 90);
            let l = rand(10, 90);

            // Force constraints based on Mood
            if (method === 'mood-pastel') {
                s = rand(60, 90);
                l = rand(80, 95);
            } else if (method === 'mood-dark') {
                s = rand(10, 40);
                l = rand(5, 20);
            } else if (method === 'mood-neon') {
                s = rand(90, 100);
                l = rand(50, 60);
            } else if (method === 'mood-ocean') {
                h = rand(170, 260); // Blues/Cyans
                s = rand(40, 80);
            } else if (method === 'mood-warm') {
                h = rand(0, 50); // Reds/Oranges
                s = rand(50, 80);
            }

            // Generate Harmony Hues
            let hues = [h];
            if (method === 'complementary') hues.push((h + 180) % 360);
            else if (method === 'triadic') hues.push((h + 120) % 360, (h + 240) % 360);
            else if (method === 'tetradic') hues.push((h + 90) % 360, (h + 180) % 360, (h + 270) % 360);
            else if (method === 'split') hues.push((h + 150) % 360, (h + 210) % 360);
            else if (method === 'analogous') hues.push((h + 30) % 360, (h - 30 + 360) % 360);

            // Assign roles logic
            const isDark = (method === 'mood-dark' || method === 'mood-neon') ? true :
                (method === 'mood-pastel') ? false :
                    (Math.random() > 0.5);

            // Helper to get color from hues array cyclically
            const getHue = (idx) => hues[idx % hues.length];

            // --- Assignments ---

            // Backgrounds
            if (!lockedVars.has('--bg-color')) {
                const bgL = isDark ? rand(5, 12) : rand(90, 98);
                const bgS = isDark ? rand(5, 20) : rand(0, 15);
                newTheme['--bg-color'] = hslToHex(getHue(0), bgS, bgL);
            }

            // Sidebar and Card (variations of bg)
            if (!lockedVars.has('--sidebar-bg')) {
                newTheme['--sidebar-bg'] = hslToHex(getHue(0), isDark ? 10 : 5, isDark ? 8 : 96);
            }

            if (!lockedVars.has('--card-bg')) {
                // Card usually pops out. Lighter in dark mode, White/Darker in light mode
                const cardL = isDark ? rand(15, 25) : rand(100, 100);
                newTheme['--card-bg'] = hslToHex(getHue(0), isDark ? 15 : 0, cardL);
            }

            // Text
            if (!lockedVars.has('--text-primary')) {
                const txtL = isDark ? rand(90, 98) : rand(10, 20);
                newTheme['--text-primary'] = hslToHex(getHue(0), 10, txtL);
            }
            if (!lockedVars.has('--text-secondary')) {
                const txtL = isDark ? rand(60, 80) : rand(40, 60);
                newTheme['--text-secondary'] = hslToHex(getHue(0), 10, txtL);
            }

            // Accents - Use the other hues from harmony
            const accentHue = (hues.length > 1) ? hues[1] : h;

            if (!lockedVars.has('--accent-color')) {
                newTheme['--accent-color'] = hslToHex(accentHue, rand(70, 95), rand(50, 65));
            }
            if (!lockedVars.has('--accent-hover')) {
                newTheme['--accent-hover'] = hslToHex(accentHue, rand(70, 95), rand(40, 50));
            }

            // Glass - Based on Card BG usually, but with alpha
            if (!lockedVars.has('--glass-bg')) {
                const gL = isDark ? 20 : 100;
                const rgb = hslToRgb(getHue(0), isDark ? 15 : 0, gL);
                newTheme['--glass-bg'] = `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, 0.7)`;
            }

            if (!lockedVars.has('--glass-border')) {
                newTheme['--glass-border'] = isDark ? "rgba(255, 255, 255, 0.08)" : "rgba(0, 0, 0, 0.08)";
            }

            // Apply
            for (const [key, val] of Object.entries(newTheme)) {
                if (!lockedVars.has(key)) {
                    themeVars[key] = val;
                }
            }

            // Refresh UI
            createControls();
            updateTheme();
        }

        // Utils
        function hslToRgb(h, s, l) {
            s /= 100;
            l /= 100;
            const k = n => (n + h / 30) % 12;
            const a = s * Math.min(l, 1 - l);
            const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));
            return [Math.round(255 * f(0)), Math.round(255 * f(8)), Math.round(255 * f(4))];
        }

        function rgbaToHex(rgba) {
            if (rgba.startsWith('#')) return rgba;
            if (rgba === 'transparent') return '#000000';
            const parts = rgba.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)$/);
            if (parts) {
                const r = parseInt(parts[1]).toString(16).padStart(2, '0');
                const g = parseInt(parts[2]).toString(16).padStart(2, '0');
                const b = parseInt(parts[3]).toString(16).padStart(2, '0');
                return `#${r}${g}${b}`;
            }
            return "#000000";
        }

        function hexToRgbaUpdate(originalRgba, newHex) {
            let alpha = 1;
            if (originalRgba.startsWith('rgba')) {
                const parts = originalRgba.match(/([\d.]+)$/);
                if (parts) alpha = parseFloat(parts[0]);
            }
            const r = parseInt(newHex.slice(1, 3), 16);
            const g = parseInt(newHex.slice(3, 5), 16);
            const b = parseInt(newHex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        function resetTheme() {
            if (confirm("Reset all settings to default?")) {
                themeVars = { ...defaultTheme };
                createControls();
                updateTheme();
            }
        }

        function copyJSON() {
            navigator.clipboard.writeText(jsonOutput.textContent).then(() => {
                const btn = document.querySelector('.action-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = originalText, 2000);
            });
        }

        // Init
        createControls();
        updateTheme();
    </script>
</body>

</html>