<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso Restringido - Naxi & Exia</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --bg-color: #fffcf8;
            --text-main: #5d5d5d;
            --text-title: #4a4a4a;
            --pastel-pink: #ffcdd2;
            --pastel-blue: #b3e5fc;
            --pastel-lavender: #e1bee7;
            --pastel-mint: #b2dfdb;
            --pastel-red: #ef5350;
            --card-shadow: 0 10px 30px rgba(225, 190, 231, 0.3);
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.8;
            overflow-x: hidden;
            user-select: none;
        }

        /* --- PANTALLA DE CUENTA REGRESIVA Y PUZZLE (COMBINADAS) --- */
        #countdown-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Alineaci√≥n al top para scrollear si es necesario */
            align-items: center;
            z-index: 20000;
            transition: opacity 0.8s ease;
            overflow-y: auto; /* Permitir scroll si el puzzle es muy grande */
            padding: 20px 0;
        }

        /* Estilos del Timer (M√°s compacto ahora) */
        .countdown-header {
            text-align: center;
            width: 90%;
            max-width: 800px;
            margin-bottom: 20px;
        }

        .countdown-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 1.5rem;
            color: var(--text-title);
            margin: 10px 0;
        }

        .timer-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .time-box {
            background: #fff;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            border: 2px solid var(--pastel-lavender);
            min-width: 60px;
            text-align: center;
        }

        .time-number {
            display: block;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.8rem;
            font-weight: bold;
            color: #7e57c2;
            line-height: 1;
        }

        .time-label {
            font-size: 0.7rem;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sync-spinner {
            font-size: 0.8rem;
            color: #9fa8da;
            margin-bottom: 5px;
            font-style: italic;
            display: block;
        }

        /* Estilos del Puzzle dentro del Countdown */
        .puzzle-wrapper {
            position: relative;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .puzzle-container {
            position: relative;
            box-shadow: var(--card-shadow);
            border: 4px solid var(--pastel-mint);
            border-radius: 10px;
            background: #f0f0f0;
            overflow: hidden;
            touch-action: none; /* Importante para m√≥viles */
            transition: border-color 0.5s;
        }
        
        .puzzle-container.solved {
            border-color: #ffb74d; /* Naranja victoria */
            box-shadow: 0 0 20px rgba(255, 183, 77, 0.6);
        }

        canvas {
            display: block;
            cursor: grab;
        }
        canvas:active { cursor: grabbing; }

        .puzzle-msg {
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            color: var(--text-main);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* ESTILOS NUEVOS PARA LA FRASE DE RESOLUCI√ìN */
        #resolution-text {
            margin-top: 20px;
            width: 90%;
            max-width: 600px;
            text-align: center;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: #d81b60; /* Un color rosado intenso */
            min-height: 1.5em;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 15px;
            border: 1px dashed var(--pastel-pink);
        }

        #resolution-text.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Estilos para el resumen final de frases */
        #final-summary-container {
            display: none;
            flex-direction: column;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            border: 2px dashed var(--pastel-lavender);
            box-shadow: var(--card-shadow);
            max-width: 600px;
            width: 90%;
            animation: fadeIn 0.8s ease;
        }
        
        #final-summary-container h2 {
            font-family: 'Quicksand', sans-serif;
            color: #7e57c2;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .summary-list {
            list-style: none;
            padding: 0;
            width: 100%;
        }
        
        .summary-list li {
            background: linear-gradient(to right, #f3e5f5, #fff);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid var(--pastel-red);
            color: var(--text-title);
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* Boton de siguiente nivel */
        .next-level-btn {
            background: #ff7043;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 112, 67, 0.4);
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease 0.5s; /* Delay para que aparezca despues del texto */
            display: none; /* Oculto por defecto */
            margin-top: 15px;
        }
        
        .next-level-btn.visible {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .next-level-btn:hover {
            background: #f4511e;
            transform: scale(1.05);
        }

        /* Botones y Pistas */
        .action-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
            margin-bottom: 20px;
        }

        .hint-btn {
            background: var(--pastel-mint);
            color: #00695c;
            border: none;
            padding: 10px 25px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            font-size: 0.95rem;
            box-shadow: 0 4px 10px rgba(178, 223, 219, 0.4);
        }
        .hint-btn:hover { background: #80cbc4; transform: scale(1.05); }
        
        .hint-text {
            font-style: italic;
            color: #7986cb;
            min-height: 2em;
            font-size: 1rem;
            padding: 0 20px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
            margin-bottom: 30px;
        }

        /* --- PANTALLA DE BLOQUEO (PREGUNTAS) --- */
        #lock-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease, visibility 0.5s;
            opacity: 0;
        }

        .lock-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            text-align: center;
            max-width: 400px;
            width: 90%;
            border: 2px solid var(--pastel-lavender);
            animation: fadeIn 1s ease;
        }

        .lock-icon { font-size: 3rem; margin-bottom: 20px; color: var(--pastel-red); }
        .lock-title { font-family: 'Quicksand', sans-serif; font-weight: 700; color: var(--pastel-red); margin-bottom: 10px; letter-spacing: 1px; }
        .lock-question { font-family: 'Quicksand', sans-serif; font-size: 1.2rem; margin-bottom: 20px; color: var(--text-title); display: block; }

        .lock-input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--pastel-blue);
            border-radius: 10px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            outline: none;
            text-align: center;
            margin-bottom: 20px;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }
        .lock-input:focus { border-color: #81d4fa; }

        .lock-btn {
            background: var(--pastel-lavender);
            color: #5e35b1;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            font-size: 1rem;
        }
        .lock-btn:hover { background: #d1c4e9; transform: scale(1.05); }

        .error-msg {
            color: var(--pastel-red);
            font-size: 0.9rem;
            margin-top: 10px;
            min-height: 20px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        /* --- PANTALLA DE INTRODUCCI√ìN --- */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #fff;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9998;
            transition: opacity 1s ease;
            overflow: hidden; 
        }

        .intro-text {
            font-family: 'Quicksand', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            color: var(--text-title);
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            padding: 20px;
            line-height: 1.2;
            background: linear-gradient(45deg, #7e57c2, #ef5350);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            z-index: 2; 
        }

        @keyframes textReveal {
            0% { opacity: 0; transform: translateY(30px) scale(0.9); }
            20% { opacity: 1; transform: translateY(0) scale(1); }
            80% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-30px) scale(1.1); }
        }

        .animate-intro {
            animation: textReveal 4s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        /* --- EMOJIS EXPLOSI√ìN --- */
        #emoji-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1; 
        }

        .emoji-particle {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%); 
            font-size: 2rem;
            opacity: 0;
        }

        @keyframes explodeAnimation {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            10% { opacity: 1; transform: translate(-50%, -50%) scale(1.5); }
            100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1); opacity: 0; }
        }

        /* --- CONTENIDO PRINCIPAL --- */
        #main-content { display: none; opacity: 0; transition: opacity 1s ease; position: relative; z-index: 1; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25%, 75% { transform: translateX(-10px); } 50% { transform: translateX(10px); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* ESTILOS DEL INFORME */
        .background-shapes { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .shape { position: absolute; border-radius: 50%; opacity: 0.4; animation: float 20s infinite ease-in-out; }
        .s1 { width: 400px; height: 400px; background: var(--pastel-pink); top: -10%; left: -10%; }
        .s2 { width: 300px; height: 300px; background: var(--pastel-blue); bottom: 10%; right: -5%; animation-delay: -5s; }
        .s3 { width: 150px; height: 150px; background: var(--pastel-mint); top: 40%; right: 10%; animation-delay: -10s; }
        .s4 { width: 200px; height: 200px; background: var(--pastel-lavender); bottom: -50px; left: 20%; animation-delay: -15s; }
        @keyframes float { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-20px) scale(1.05); } }

        .container { max-width: 900px; margin: 0 auto; padding: 40px 20px; position: relative; z-index: 2; }
        header { text-align: center; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); padding: 40px; border-radius: 20px; box-shadow: var(--card-shadow); margin-bottom: 50px; border: 2px solid white; }
        h1 { font-family: 'Quicksand', sans-serif; font-size: 2.2rem; color: var(--text-title); margin-bottom: 10px; }
        .meta-data { font-size: 0.95rem; background: #fff; padding: 15px; border-radius: 10px; display: inline-block; margin-top: 15px; border: 1px solid var(--pastel-lavender); }
        .badge { display: inline-block; background: #ef5350; color: white; padding: 4px 12px; border-radius: 50px; font-size: 0.8rem; font-weight: bold; letter-spacing: 1px; margin-bottom: 15px; }
        
        section { background: rgba(255, 255, 255, 0.9); padding: 35px; margin-bottom: 35px; border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.02); border: 1px solid rgba(255,255,255,0.6); transition: transform 0.3s; }
        section:hover { transform: translateY(-3px); }
        
        h2 { font-family: 'Quicksand', sans-serif; color: var(--text-title); border-bottom: 3px solid var(--pastel-mint); display: inline-block; padding-bottom: 5px; margin-top: 0; }
        h3 { font-family: 'Quicksand', sans-serif; color: #7e57c2; margin-top: 25px; }
        p { margin-bottom: 15px; text-align: justify; }
        strong { color: #5c6bc0; }
        
        .item-list { list-style: none; padding: 0; }
        .item-list li { margin-bottom: 20px; padding-left: 20px; border-left: 4px solid var(--pastel-pink); background: linear-gradient(to right, rgba(255, 205, 210, 0.1), transparent); padding: 15px; border-radius: 0 10px 10px 0; }
        
        .table-wrapper { overflow-x: auto; margin: 20px 0; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; background: white; min-width: 600px; }
        th { background-color: var(--pastel-lavender); color: #5e35b1; padding: 12px; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        tr:hover { background-color: #f9f9f9; }
        
        .chart-box { background: #fff; padding: 20px; border-radius: 15px; margin: 30px 0; box-shadow: inset 0 0 20px rgba(225, 190, 231, 0.1); border: 1px solid var(--pastel-blue); position: relative; height: 400px; display: flex; justify-content: center; align-items: center; }
        .chart-box.small { max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; }
        
        .signature-section { margin-top: 60px; text-align: right; padding: 30px; background: linear-gradient(135deg, #fff, var(--pastel-pink)); border-radius: 20px; border: 1px solid var(--pastel-pink); }
        .signature-text { font-family: 'Quicksand', sans-serif; font-weight: bold; font-size: 1.2rem; color: #c62828; }
        
        @media (max-width: 600px) {
            .intro-text { font-size: 1.8rem; }
            h1 { font-size: 1.5rem; }
            .time-box { min-width: 50px; padding: 8px; }
            .time-number { font-size: 1.5rem; }
            .puzzle-container { width: 95vw; height: 300px; }
        }
    </style>
</head>
<body>

    <!-- PANTALLA UNIFICADA: COUNTDOWN + PUZZLE -->
    <div id="countdown-screen">
        
        <!-- Bloque del Reloj -->
        <div class="countdown-header">
            <div class="lock-icon" style="font-size: 2rem; margin-bottom: 5px;">‚è≥</div>
            <h2 class="countdown-title">Disponible: Domingo 23/11/2025</h2>
            <span class="sync-spinner" id="sync-status">Sincronizando reloj global...</span>
            
            <div class="timer-container">
                <div class="time-box">
                    <span class="time-number" id="days">00</span>
                    <span class="time-label">D√≠as</span>
                </div>
                <div class="time-box">
                    <span class="time-number" id="hours">00</span>
                    <span class="time-label">Hs</span>
                </div>
                <div class="time-box">
                    <span class="time-number" id="minutes">00</span>
                    <span class="time-label">Min</span>
                </div>
                <div class="time-box">
                    <span class="time-number" id="seconds">00</span>
                    <span class="time-label">Seg</span>
                </div>
            </div>
        </div>

        <!-- Bloque del Puzzle -->
        <div class="puzzle-wrapper" id="puzzle-game-wrapper">
            <h3 class="puzzle-msg">üß© Desbloqueo Manual Requerido üß©</h3>
            
            <!-- Contenedor del Canvas (Ya no tiene el overlay adentro) -->
            <div class="puzzle-container" id="puzzle-container">
                <canvas id="puzzle-canvas"></canvas>
            </div>

            <!-- Nuevo contenedor para la frase de resoluci√≥n (DEBAJO de la imagen) -->
            <div id="resolution-text"></div>

            <!-- Bot√≥n para siguiente puzzle (ahora afuera, debajo del texto) -->
            <button id="next-puzzle-btn" class="next-level-btn" onclick="loadNextPuzzle()">‚ú® ¬°Dame otro desaf√≠o! ‚ú®</button>
        </div>

        <!-- Bloque de Resumen Final (Oculto por defecto) -->
        <div id="final-summary-container">
            <h2>‚ú® Record√° estas frases ‚ú®</h2>
            <ul class="summary-list" id="summary-list">
                <!-- Se llenar√° con JS -->
            </ul>
            <p style="text-align: center; color: #999; margin-top: 10px; font-style: italic;">(La puerta se abrir√° cuando el reloj marque cero)</p>
        </div>

        <!-- Botones de Pista -->
        <div class="action-buttons">
            <button class="hint-btn" onclick="showHint()">Decime algo mientras tanto</button>
        </div>
        <div id="hint-display" class="hint-text"></div>

    </div>

    <!-- PANTALLA 2: LOCK SCREEN (Password) -->
    <div id="lock-screen">
        <div class="lock-card" id="lock-card">
            <div class="lock-icon">üîí</div>
            <h2 class="lock-title">CONFIDENCIALIDAD M√ÅXIMA</h2>
            <p id="lock-step-text">Paso 1 de 4</p>
            
            <label class="lock-question" id="question-label" for="password">¬ø√çndice...?</label>
            <input type="password" id="password" class="lock-input" placeholder="Ingrese respuesta">
            
            <button class="lock-btn" onclick="checkAccess()">Confirmar</button>
            <div class="error-msg" id="error-msg">Respuesta Incorrecta</div>
        </div>
    </div>

    <!-- PANTALLA 3: INTRO -->
    <div id="intro-screen">
        <h1 class="intro-text" id="intro-text">INFORME DE RELEVAMIENTO AFECTIVO</h1>
        <div id="emoji-container"></div>
    </div>

    <!-- PANTALLA 4: MAIN CONTENT -->
    <div id="main-content">
        <div class="background-shapes">
            <div class="shape s1"></div>
            <div class="shape s2"></div>
            <div class="shape s3"></div>
            <div class="shape s4"></div>
        </div>

        <div class="container">
            
            <header data-aos="fade-down" data-aos-duration="1000">
                <div class="badge">CONFIDENCIAL / VULNERABILIDAD ALTA</div>
                <h1>INFORME DE RELEVAMIENTO AFECTIVO</h1>
                <div class="meta-data">
                    <p style="margin: 5px 0; text-align: center;"><strong>Autor:</strong> Ignacio Snieg (a.k.a. Naxi/Data/Otto)</p>
                    <p style="margin: 5px 0; text-align: center;"><strong>Para:</strong> Laura Antmann (a.k.a. Exia/Nihon/Korelina)</p>
                    <p style="margin: 5px 0; text-align: center;"><strong>Fecha:</strong> Noviembre, 2025</p>
                </div>
            </header>

            <section data-aos="fade-up">
                <h2>1. RESUMEN</h2>
                <p>El presente documento tiene como objetivo desglosar, analizar y validar la fenomenolog√≠a interna del sujeto Naxi respecto al v√≠nculo con el sujeto Exia. Tras los eventos recientes y en concordancia con la profundidad que ha adquirido el v√≠nculo a lo largo de estos meses, se ha detectado una anomal√≠a en las categor√≠as relacionales convencionales. La hip√≥tesis central sostiene que lo que Naxi experimenta internamente no se ajusta a la definici√≥n de "Amistad tradicional" ni a la de "Atracci√≥n rom√°ntica/sexual", sino que habita un espectro dis√≠mil de alta intensidad y resonancia. Para evitar presunciones esquizoides a partir de ahora Naxi, que es quien suscribe, continuar√° escribiendo el ensayo en primera persona.</p>
            </section>

            <section data-aos="fade-up">
                <h2>2. DELIMITACI√ìN DEL ESPECTRO (LO QUE NO ES)</h2>
                <p>Para entender la entidad de lo que me pasa, primero es necesario despejar las variables que suelen generar ruido en el an√°lisis convencional y que, dada mi historia (demisexualidad), podr√≠an prestarse a confusi√≥n:</p>
                <ul class="item-list">
                    <li><strong>Ausencia de la Variable Er√≥tica:</strong> No detecto en mi sistema un impulso de naturaleza f√≠sico-er√≥tica. No encuentro destellos de l√≠bido. No hay una b√∫squeda de contacto sexual, sino de contacto vital.</li>
                    <li><strong>Ausencia de la Variable Rom√°ntica Tradicional:</strong> No estoy atravesando la t√≠pica ansiedad de un cortejo. Ser√≠a extremadamente clich√©, un tropo del cual los mangas que lees y traduc√≠s hacen un uso extensivo. Lo que me pasa con vos corre por un carril paralelo que no est√° definido por l√≥gicas convencionales y tradicionales que necesitan inequ√≠vocamente definir las categor√≠as humanas en un compartimento.</li>
                    <li><strong>No es una amistad trampol√≠n:</strong> Como bien sabes, en mi abordaje demisexual de los v√≠nculos me es completamente necesario construir una amistad consolidada antes de que la atracci√≥n por alguien aparezca. Sin embargo, no siento que eso es lo que est√© pasando en este momento. En mi coraz√≥n, la amistad que tenemos en este momento es preciosa e invaluable. Me siento muy feliz y c√≥modo de vivirla de esta manera, sin embargo siento que comienza a encontrar los l√≠mites que se acercan al umbral donde la categor√≠a de amistad (con el subeje calificativo: convencional) empieza a quedarse peque√±a.</li>
                </ul>
            </section>

            <section data-aos="fade-up">
                <h2>3. AN√ÅLISIS DE RESONANCIA (LA F√çSICA DEL V√çNCULO)</h2>
                <p>Est√° comprobado que hay √°reas de contacto en nuestra naturaleza. Hay v√©rtices que en sus picos y valles logran acompa√±arse en una clave de onda que resulta compatible. Esto ha facilitado el camino para lograr la profundizaci√≥n actual, sin embargo tambi√©n genera incertidumbres en mi pensamiento de hacia donde desemboca.</p>
                <p><strong>Definici√≥n de Resonancia en este sistema:</strong> La resonancia no es similitud est√°tica; es movimiento. Cuando nuestras frecuencias mentales y emocionales se encuentran, se produce una amplificaci√≥n.</p>
                <p><strong>Acercamiento (Fase Constructiva):</strong> Cuando estamos bien, la resonancia genera una sensaci√≥n de "hogar". Tu l√≥gica calma mi caos; mi emoci√≥n (creo, quiz√°s inocentemente) ablanda tu estructura.</p>
                <p><strong>Alejamiento (Fase Reactiva):</strong> Cuando la intensidad sube demasiado y el miedo aparece, la misma resonancia genera ruido. El miedo a perder esta sinton√≠a es lo que dispara mis alarmas.</p>
                <p>El c√≥ctel inevitablemente genera R.U.M.I.A. (Repeticiones Unilaterales Mentales Imaginando Arbitrariedades). En la motivaci√≥n de desarmarla, debemos analizar los puntos de contacto intentando explicar qu√© es lo que genera esta incertidumbre.</p>

                <h3>3.1. Datos Comparativos</h3>
                <p>A continuaci√≥n, presento la comparativa de nuestras estad√≠sticas base, lo que explica por qu√© funcionamos como un sistema complejo:</p>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr><th>Atributo</th><th>Exia (Sujeto K)</th><th>Naxi (Sujeto N)</th><th>Diferencial</th><th>An√°lisis</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Inclinaci√≥n Ling√º√≠stica</td><td>85</td><td>79</td><td>-6</td><td>Sincron√≠a. Hablamos el mismo idioma de c√≥digos y referencias. Obviamente sos m√°s lista que yo porque habl√°s japon√©s</td></tr>
                            <tr><td>Inclinaci√≥n L√≥gico-Mat.</td><td>75</td><td>79</td><td>+4</td><td>Paridad alta. Ambos buscamos orden, aunque yo me refugio m√°s en los n√∫meros.</td></tr>
                            <tr><td>Empat√≠a</td><td>92</td><td>92</td><td>0</td><td>Espejo absoluto. Nos cuidamos porque entendemos el dolor ajeno.</td></tr>
                            <tr><td>Sensibilidad</td><td>81</td><td>99</td><td>+18</td><td>Zona de Riesgo. Mi hipersensibilidad a veces satura el canal de comunicaci√≥n.</td></tr>
                            <tr><td>Maldad</td><td>73</td><td>32</td><td>-41</td><td>Complementarios. Tu maldad (casi siempre l√∫dica, mayormente inocente y muchas veces sin querer)  de alguna forma extra√±a me ayuda a no hipersensibilizarme; mi ingenuidad creo que te suaviza aunque un poco te moleste.</td></tr>
                            <tr><td>Saltos de Fe</td><td>34</td><td>86</td><td>+52</td><td>Tensi√≥n Estructural. Yo me tiro sin red aunque me lastime. Vos calcul√°s la ca√≠da y no te tir√°s. Ac√° somos opuestos separados por un barranco, pero solo se necesita un puente</td></tr>
                            <tr><td>Potencial Autismo</td><td>76</td><td>77</td><td>+1</td><td>Somos dos criaturas de h√°bitos y obsesiones. PD: Obviamente uno no tiene que diagnosticar a nadie ni autodiagnosticarse, pero es la forma humor√≠stica que le encontramos para darle orden a nuestras man√≠as. No es gracioso. No hagan esto en sus casas</td></tr>
                        </tbody>
                    </table>
                </div>

                <h3>3.2. Ejes de Compatibilidad</h3>
                <p>Para visualizar c√≥mo estas estad√≠sticas interact√∫an en la pr√°ctica, propongo el siguiente esquema de compatibilidad vincular:</p>
                
                <div class="chart-box">
                    <canvas id="radarChart"></canvas>
                </div>

                <ul class="item-list">
                    <li><strong>Inclinaci√≥n Ling√º√≠stica:</strong> Alta. Nuestra capacidad de generar "Lore" compartido (apodos, chistes internos, traducciones de emociones a conceptos) es el pegamento del v√≠nculo.</li>
                    <li><strong>Inclinaci√≥n L√≥gico-Matem√°tica:</strong> Alta. Desde el √≠ndice MACK hasta el nuevo orden abierto gracias al amor por el cubo rubik, nos une cierta inclinaci√≥n hacia la l√≥gica.</li>
                    <li><strong>Sensibilidad:</strong> Polarizada. Si bien ambos tenemos un porcentaje de sensibilidad elevado, a mi me domina y me empuja a cometer errores mientras que a vos (siento) te ancla.</li>
                    <li><strong>Empat√≠a:</strong> Alta. La capacidad de estar para el otro me hace sentir que es un lugar seguro.</li>
                    <li><strong>Fe:</strong> Polarizada. Aqu√≠ est√° el n√∫cleo de la din√°mica. Yo soy el Creyente Tr√°gico (a pesar de todo, apuesto); vos sos la Esc√©ptica Pragm√°tica. Esta tensi√≥n es la que mantiene el v√≠nculo vivo: yo te traigo esperanza, vos me tra√©s realidad.</li>
                </ul>
            </section>

            <section data-aos="fade-up">
                <h2>4. AN√ÅLISIS TOPOL√ìGICO</h2>
                <p>He decidido aislar este punto y convertirlo en una categor√≠a propia para profundizar mi teor√≠a de porque creo que la palabra amistad, sin al menos un adjetivo que pueda ampliar sus m√°rgenes para que refleje la profundidad que hoy habitamos, es insuficiente. Si bien cumple con los par√°metros t√©cnicos de superficie, la arquitectura interna del v√≠nculo presenta caracter√≠sticas de carga y resistencia que son an√≥malas para una amistad convencional. Esto seg√∫n mi perspectiva personal, que probablemente est√© sesgada y confundida pero por eso mismo es que hice este informe</p>
                <p>Para entenderlo, lo desgloso en principios estructurales:</p>
                
                <h3>4.1. Principio de Intimidad</h3>
                <p>No me refiero a proximidad f√≠sica, sino a la distancia cero entre mi pensamiento y tu recepci√≥n.</p>
                <ul class="item-list">
                    <li><strong>El Canal Abierto:</strong> Puedo compartirte el borrador de mi mente sin editar. Mis miedos m√°s irracionales (como el miedo a la irrelevancia), mis crisis existenciales o mis alegr√≠as m√°s tontas tienen el mismo peso y validaci√≥n ante tus ojos.</li>
                    <li><strong>El Refugio:</strong> Tu presencia, sea digital o f√≠sica, act√∫a como una c√°mara de descompresi√≥n donde puedo quitarme el traje de "adulto funcional que resuelve problemas" y ser simplemente el Naxi roto o el Naxi feliz. Es una intimidad que descansa.</li>
                </ul>

                <h3>4.2. Principio de Complicidad</h3>
                <p>Hemos construido una estructura de rituales que se han vuelto los pilares de mi d√≠a a d√≠a.</p>
                <ul class="item-list">
                    <li><strong>La Rutina Sagrada:</strong> El √çndice MACK no es un reporte, es un chequeo vital. Desearnos las Buenas Noches no es cortes√≠a, es la condici√≥n necesaria para que mi sistema se apague en paz. Las sesiones de Coworking y las llamadas no son para matar el tiempo, son para habitarlo juntos.</li>
                    <li><strong>La Hip√≥tesis de la Exclusividad Unilateral:</strong> Aqu√≠ radica un punto cr√≠tico de mi an√°lisis y de mi vulnerabilidad. Soy consciente de tu naturaleza sociable y de tu extensa red de afectos (besties). Es probable que para vos, compartir c√≥digos o rutinas sea parte de tu est√°ndar de amistad. Pero necesito dejar constancia en actas: Yo no hago esto con nadie m√°s.</li>
                    <li><strong>El Peso Espec√≠fico:</strong> Para m√≠, estos rituales son exclusivos de nuestro v√≠nculo. No tengo √≠ndice MACK con nadie m√°s. No hago coworking en silencio con nadie m√°s. No le leo cuentos a nadie m√°s. Que para m√≠ sea √∫nico y quiz√°s para vos sea habitual es lo que genera el v√©rtigo, pero tambi√©n lo que le da valor a mi apuesta: te doy lo que no le doy a nadie.</li>
                </ul>

                <h3>4.3. Principio de Vulnerabilidad</h3>
                <p>Este es el punto m√°s cr√≠tico para alguien como yo, que suele estar a la defensiva o con miedo al abandono.</p>
                <ul class="item-list">
                    <li><strong>Desnudez Emocional:</strong> Con vos me permito ser fr√°gil. Te he mostrado mis partes m√°s oscuras, y en lugar de juzgarme, te has quedado.</li>
                    <li><strong>El Sost√©n:</strong> No es solo que yo me abra; es ver que vos tambi√©n confi√°s en m√≠ para mostrarme tus propias grietas. Esa reciprocidad en la fragilidad es el cemento m√°s fuerte que tenemos. No tengo que ser fuerte con vos; puedo ser.</li>
                </ul>

                <h3>4.4. Principio de Constancia</h3>
                <p>M√°s all√° de la intensidad, lo que define esto es la permanencia y el ritmo.</p>
                <ul class="item-list">
                    <li><strong>El Ritmo Card√≠aco del D√≠a:</strong> El "Buenos d√≠as" no es un saludo protocolar, es un ping de sistema para confirmar que seguimos conectados. La rutina de hablarnos no se siente como una obligaci√≥n social, sino como el ritmo natural de mi d√≠a.</li>
                    <li><strong>La Red:</strong> Estar ah√≠ cuando el otro se cae, o simplemente cuando el otro est√° aburrido. La certeza de que si escribo, vas a estar. Esa constancia me da una seguridad que raramente encuentro.</li>
                </ul>

                <h3>4.5. Principio de Excepcionalidad</h3>
                <p>Aqu√≠ radica la conclusi√≥n cient√≠fica de mi observaci√≥n interna.</p>
                <ul class="item-list">
                    <li><strong>Lo excepcional:</strong> He tenido muchas amistades, intensas y largas. Pero ninguna tiene esta textura. Ninguna combina la agilidad mental con la profundidad emocional y la ternura de esta manera espec√≠fica.</li>
                    <li><strong>Lo bello:</strong> No sos una pieza intercambiable. No es que ocupes un "rol de amiga" posible que otro podr√≠a llenar si te fueras. Ocupas un espacio con tu forma exacta en mi vida.</li>
                </ul>
            </section>

            <section data-aos="fade-up">
                <h2>4. AN√ÅLISIS DIMENSIONAL</h2>
                <p>A continuaci√≥n, desgloso mi experiencia interna en cuatro √≥rdenes fundamentales:</p>
                
                <h3>4.1. Orden Intelectual</h3>
                <p>Nuestra conexi√≥n mental no es pasiva, es un deporte de contacto.</p>
                <ul class="item-list">
                    <li><strong>El Desaf√≠o Constante:</strong> Me fascina que seas mas lista que yo. Noto que tenes m√°s facilidades para cosas que yo no tengo, me gusta que me corrijas, que me ense√±es, o simpelemente que existas cerca m√≠o. Tengo una conversaci√≥n en ingl√©s con vos y me doy cuenta que es incre√≠blemente superior al m√≠o (obvio, estudiaste en un colegio supercheto pero Macri tambi√©n y mir√°, a duras penas habla espa√±ol). Pod√©s recitar de memoria a Borges, hablar sobre filosof√≠a o pol√≠tica o cuanto tema exista. Me siento tonto cuando hablo con vos, pero uno bueno. Uno que admira y est√° listo para aprender.</li>
                    <li><strong>Tracucciones:</strong> Vos traduc√≠s mangas y yo traduzco n√∫meros en excels y presupuestos en ventas. Obvio, lo tuyo es mucho m√°s interesante.  Me ense√±√°s palabras en japon√©s (Kazegimi) que describen estados de √°nimo para los que yo no ten√≠a nombre, y yo llevo religiosamente un sistema que traduce nuestros estados de √°nimo a un √≠ndice medible para poder hacer un registro de como estuvimos y como estamos en Mente Alma Coraz√≥n y Cuerpo (Karada, otra palabra que aprend√≠ por vos) </li>
                    <li><strong>El C√≥digo Compartido:</strong> Cree un alfabeto propio que solo yo conoc√≠a. Vos lo descifraste en una semana. Tambi√©n te apropiaste de mi √çNDICE MACK. Form√°s parte de mis secretos mejor guardados y los haces parte tuya. Siento que habitamos (y construimos) un mundo donde solo nosotros dos tenemos la llave.</li>
                </ul>

                <h3>4.2. Orden Emocional: La Trinchera y el Refugio</h3>
                <p>Hay algo en permitirse ser uno, con otro.</p>
                <ul class="item-list">
                    <li><strong>La Vulnerabilidad compartida:</strong> Nos hemos acompa√±ado en los momentos m√°s bajos: mis crisis laborales con robos y jefes in√∫tiles, tus momentos de "fobia social" y bajones de energ√≠a, el diagn√≥stico de mi mam√°. No necesitamos fingir que "est√° todo bien".</li>
                    <li><strong>El Contrato T√°cito:</strong> Existe una regla impl√≠cita de "no matarse". Cuando uno cae en la oscuridad, el otro est√° ah√≠ para recordar que la vida, a veces, tiene cosas ricas como un estofado o un caf√©. Sos mi ATV (Acompa√±ante Terap√©utico Virtual) y yo intento ser tu ancla de optimismo (aunque a veces falle).</li>
                </ul>

                <h3>4.3. Orden Experimental: Aventuras y Creaci√≥n de An√©cdotas</h3>
                <p>No somos solo amigos de chat; somos compa√±eros de aventuras digitales y anal√≥gicas.</p>
                <ul class="item-list">
                    <li><strong>La Aventura Digital:</strong> Desde ver pel√≠culas sincronizados por Meet (aunque se corte el audio) hasta hacer sesiones de coworking en silencio mientras lidiamos con mi horrible trabajo y vos con tu trabajo fenomenal que a veces adolece de tener mucho texto, y parar para cocinar y almorzar juntos. Convertimos la rutina laboral en un evento compartido.</li>
                    <li><strong>La Vulnerabilidad compartida:</strong> Nos hemos acompa√±ado en los momentos m√°s bajos, o al menos vos me has acompa√±ado en los m√≠os: mis crisis laborales, me has dejado entrar en tus momentos de "fobia social" y bajones de energ√≠a, el diagn√≥stico de mi mam√°. No necesitamos fingir que est√° todo bien, es un lugar seguro.</li>
                    <li><strong>Las data-visitas:</strong> Cuando voy a Buenos Aires, siempre quiero verte. Se que vamos a ir a caf√©s excepcionalmente chetos, o a bares con tragos cuyo picor tiene que ser declarado un arma de destrucci√≥n masiva... pero disfruto mucho compartiendo mi tiempo con vos</li>
                </ul>

                
            </section>

            <section data-aos="fade-up">
                <h2>5. TEOR√çA DE LA VINCULACI√ìN</h2>
                <p>Los v√≠nculos entre personas son como sogas. Las amistades son m√°s maleables, m√°s diversas, muchas veces se disfrutan solo por ser. Las sogas de las parejas tienen m√°s peso de ambos lados, si no hay una buena comunicaci√≥n, se tira m√°s de ambos lados, se enredan m√°s f√°cil. Las sogas de las amistades son sogas que est√°n un poco m√°s lejos del campo visual de la cotidianeidad. Mejor dicho, uno no suele apoyar todo su peso en una amistad y en una pareja creo que tampoco deber√≠a pero si es m√°s com√∫n, hay m√°s expectativas puestas sobre la mesa. A veces yo tiro de m√°s con mi intensidad y miedo al abandono; a veces vos solt√°s cuerda con tu necesidad de aislamiento. Pero la soga no se rompe porque est√° tejida con algo m√°s fuerte que la obligaci√≥n: la lealtad.</p>
                <div class="chart-box small">
                    <canvas id="pieChart"></canvas>
                </div>
                <p>Del otro lado est√° la idea del gato en la caja. Mi ansiedad a veces me hace creer que el "gato" (nuestro cari√±o) est√° muerto si no abro la caja cada 5 minutos para chequearlo. Pero vos, con tu pragmatismo, tu compa√±√≠a, tu paciencia (realmente excepcional) y tu reafirmaci√≥n volviste la caja transparente. Me demostraste que no hace falta la confirmaci√≥n constante porque los hechos (el coworking, las peliculas, las visitas) son la prueba emp√≠rica de que el gato est√° vivo, gordo y feliz. Tu lealtad es la ventana que me permite ver sin necesidad de romper nada. A√∫n as√≠, el impulso siempre aparece. Siempre los miedos y siempre la ansiedad, porque est√°n adentro y no se corresponden con la realidad. Est√°s en todo tu derecho de decir que haces todo bien pero soy muy ... tonto para verlo. Pero lo veo, lo siento, es hermoso. A veces las voces gritan m√°s fuerte, pero las prob√°s una y otra vez equivocadas.</p>
                
                <div class="chart-box small">
                    <canvas id="anxietyChart"></canvas>
                </div>
                
                
            </section>

            <section data-aos="fade-up" style="background: linear-gradient(to bottom right, #fff, #f3e5f5); border: 1px solid #e1bee7;">
                <h2>6. PROPUESTA OPERATIVA</h2>
                <p>Dado que las definiciones est√°ticas no aplican a la complejidad de la muestra, propongo reemplazar la necesidad de una "etiqueta" por un Protocolo de Iteraci√≥n Continua.</p>
                <p>No busco definir una constante que nos limite, sino entender nuestra funci√≥n como una variable din√°mica. La propuesta es establecer un espacio de experimentaci√≥n seguro, un sandbox emocional, donde podamos ejecutar el siguiente bucle:</p>
                <ul class="item-list">
                    <li><strong>Recolecci√≥n de Datos:</strong> Seguir acumulando experiencias de alta intensidad (leer cuentos, cocinar, pasear, silencios compartidos).</li>
                    <li><strong>Procesamiento:</strong> Mantener la honestidad brutal sobre c√≥mo nos sentimos con cada interacci√≥n, sin miedo a que el resultado rompa la hip√≥tesis.</li>
                    <li><strong>Validaci√≥n:</strong> Confirmar que ambos seguimos c√≥modos en este espectro en construcci√≥n, pero hablar sobre la naturaleza del mismo. La base es una amistad, pero ¬øEs una convencional? ¬øEs una amistad con esteroides? .</li>
                </ul>
                <p>Mi objetivo no es llegar a un resultado binario (0 o 1), sino mantenernos en este estado cu√°ntico donde la probabilidad de hacernos bien tiende al infinito. Quiero seguir explorando esta "avenida diferente" con vos, sin saber d√≥nde termina, pero con la certeza estad√≠stica de que el camino vale la pena.</p>
                <p>Gracias por ser mi variable constante en este caos. Te quiero mucho.</p>
                
                <div class="signature-section">
                    <div class="signature-text">Firma: Naxi</div>
                    <p>(Gerente de Finanzas & Profesor de Armado de Cubos & Ingeniero del drama & Cursi-king )</p>
                </div>
            </section>

        </div>
    </div>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        /* =========================================
           VARIABLES DE ESTADO
           ========================================= */

        const img_rompecabezas = [
            "https://i.imgur.com/xMQG6nt.jpeg", // Puzzle 1
            "https://i.imgur.com/gyJ0qwP.jpeg", // Puzzle 2
            "https://i.imgur.com/6zI1WII.jpeg", // Puzzle 3
            "https://i.imgur.com/1OYP3Fr.jpeg"  // Puzzle 4
        ];

        const resolucion_rompecabezas = [
            "(1) - Un instante cualquiera es m√°s profundo y diverso que el mar. La vida es corta",
            "(2) - El viaje que nos parec√≠a inmediato, preexist√≠a en el di√°logo y en el imprevisto",
            "(3) - La amistad no necesita frecuencia. El amor est√° lleno de ansiedades, de dudas. Un d√≠a de ausencia puede ser terrible",
            "(4) - ¬øQui√©n le dir√° que el otro que lo observa // es apenas un sue√±o del espejo?"
        ];

        const CANTIDAD_ROMPECABEZAS = 4; 
        const CANTIDAD_PIEZAS_BASE = 12; 
        
        let currentPuzzleIndex = 0; // 1 a 4
        let solvedPuzzles = []; 
        let isTimeReached = false;
        let allPuzzlesFinished = false; // Nueva bandera para el estado final
        
        /* =========================================
           L√ìGICA DEL ROMPECABEZAS
           ========================================= */
        const puzzleCanvas = document.getElementById('puzzle-canvas');
        const puzzleCtx = puzzleCanvas.getContext('2d');
        let puzzleImg;
        let pieces = [];
        let selectedPiece = null;
        let puzzleRows, puzzleCols;
        let pieceWidth, pieceHeight;
        const SNAP_DISTANCE = 30; 

        window.resolverRompecabeza = function() {
            console.log("%c‚ú® ACTIVANDO MODO DIOS... ‚ú®", "color: purple; font-weight: bold;");
            pieces.forEach(p => { p.x = p.correctX; p.y = p.correctY; p.isLocked = true; });
            drawPuzzle();
            checkWin(); 
        }

        function initPuzzleSystem() {
            loadNextPuzzle();
        }

        function loadNextPuzzle() {
            const txtContainer = document.getElementById('resolution-text');
            const btn = document.getElementById('next-puzzle-btn');
            const container = document.getElementById('puzzle-container');
            
            txtContainer.classList.remove('visible');
            txtContainer.innerHTML = ''; 
            btn.classList.remove('visible');
            container.classList.remove('solved');
            
            setTimeout(() => {
                let nextId = solvedPuzzles.length + 1;
                
                // Si ya completamos todos, no cargamos m√°s
                if (nextId > CANTIDAD_ROMPECABEZAS) {
                    return;
                }

                currentPuzzleIndex = nextId;
                initPuzzle(currentPuzzleIndex);
            }, 500);
        }

        function initPuzzle(puzzleId) {
            puzzleImg = new Image();
            const imgUrl = img_rompecabezas[puzzleId - 1];
            if (!imgUrl) return;

            puzzleImg.crossOrigin = "Anonymous";
            puzzleImg.src = imgUrl; 
            
            puzzleImg.onload = function() { setupPuzzle(); };
        }

        puzzleCanvas.addEventListener('mousedown', onPuzzleDown);
        puzzleCanvas.addEventListener('mousemove', onPuzzleMove);
        puzzleCanvas.addEventListener('mouseup', onPuzzleUp);
        puzzleCanvas.addEventListener('touchstart', onPuzzleDown, {passive: false});
        puzzleCanvas.addEventListener('touchmove', onPuzzleMove, {passive: false});
        puzzleCanvas.addEventListener('touchend', onPuzzleUp);

        function setupPuzzle() {
            const maxWidth = Math.min(800, window.innerWidth * 0.9);
            const maxHeight = 500; 
            let scale = Math.min(maxWidth / puzzleImg.width, maxHeight / puzzleImg.height);
            
            puzzleCanvas.width = puzzleImg.width * scale;
            puzzleCanvas.height = puzzleImg.height * scale;

            const aspectRatio = puzzleImg.width / puzzleImg.height;
            let piezasObjetivo = Math.round(CANTIDAD_PIEZAS_BASE * Math.pow(1.5, currentPuzzleIndex - 1));
            
            puzzleRows = Math.round(Math.sqrt(piezasObjetivo / aspectRatio));
            puzzleCols = Math.round(piezasObjetivo / puzzleRows);
            
            pieceWidth = puzzleCanvas.width / puzzleCols;
            pieceHeight = puzzleCanvas.height / puzzleRows;

            createPieces(scale);
            shufflePieces();
            drawPuzzle();
        }

        function createPieces(scale) {
            pieces = [];
            for (let r = 0; r < puzzleRows; r++) {
                for (let c = 0; c < puzzleCols; c++) {
                    let piece = {
                        r: r, c: c,
                        sx: c * (puzzleImg.width / puzzleCols), 
                        sy: r * (puzzleImg.height / puzzleRows), 
                        sw: puzzleImg.width / puzzleCols, sh: puzzleImg.height / puzzleRows,
                        x: 0, y: 0, w: pieceWidth, h: pieceHeight,
                        correctX: c * pieceWidth, correctY: r * pieceHeight,
                        isLocked: false,
                        top: (r === 0) ? 0 : -pieces[(r-1)*puzzleCols + c].bottom,
                        right: (c === puzzleCols - 1) ? 0 : (Math.random() > 0.5 ? 1 : -1),
                        bottom: (r === puzzleRows - 1) ? 0 : (Math.random() > 0.5 ? 1 : -1),
                        left: (c === 0) ? 0 : -pieces[pieces.length-1].right
                    };
                    pieces.push(piece);
                }
            }
        }

        function shufflePieces() {
            pieces.forEach(p => {
                p.x = Math.random() * (puzzleCanvas.width - pieceWidth);
                p.y = Math.random() * (puzzleCanvas.height - pieceHeight);
            });
        }

        function drawPuzzle() {
            puzzleCtx.clearRect(0, 0, puzzleCanvas.width, puzzleCanvas.height);
            puzzleCtx.globalAlpha = 0.1;
            puzzleCtx.drawImage(puzzleImg, 0, 0, puzzleCanvas.width, puzzleCanvas.height);
            puzzleCtx.globalAlpha = 1;

            let drawOrder = [...pieces].sort((a, b) => {
                if (a === selectedPiece) return 1;
                if (b === selectedPiece) return -1;
                return (a.isLocked ? 0 : 1) - (b.isLocked ? 0 : 1);
            });

            drawOrder.forEach(p => drawPiece(p));
        }

        function drawPiece(p) {
            puzzleCtx.save();
            puzzleCtx.beginPath();
            const x = p.x, y = p.y, w = p.w, h = p.h;

            puzzleCtx.moveTo(x, y);
            if (p.top !== 0) { puzzleCtx.lineTo(x + w * 0.4, y); puzzleCtx.bezierCurveTo(x + w * 0.4, y - h * 0.2 * p.top, x + w * 0.6, y - h * 0.2 * p.top, x + w * 0.6, y); }
            puzzleCtx.lineTo(x + w, y);
            if (p.right !== 0) { puzzleCtx.lineTo(x + w, y + h * 0.4); puzzleCtx.bezierCurveTo(x + w + w * 0.2 * p.right, y + h * 0.4, x + w + w * 0.2 * p.right, y + h * 0.6, x + w, y + h * 0.6); }
            puzzleCtx.lineTo(x + w, y + h);
            if (p.bottom !== 0) { puzzleCtx.lineTo(x + w * 0.6, y + h); puzzleCtx.bezierCurveTo(x + w * 0.6, y + h + h * 0.2 * p.bottom, x + w * 0.4, y + h + h * 0.2 * p.bottom, x + w * 0.4, y + h); }
            puzzleCtx.lineTo(x, y + h);
            if (p.left !== 0) { puzzleCtx.lineTo(x, y + h * 0.6); puzzleCtx.bezierCurveTo(x - w * 0.2 * p.left, y + h * 0.6, x - w * 0.2 * p.left, y + h * 0.4, x, y + h * 0.4); }
            puzzleCtx.lineTo(x, y);
            puzzleCtx.closePath();
            puzzleCtx.clip();
            
            const scaleX = puzzleCanvas.width / puzzleImg.width;
            const scaleY = puzzleCanvas.height / puzzleImg.height;
            
            puzzleCtx.drawImage(puzzleImg, p.sx - (p.w/scaleX * 0.25), p.sy - (p.h/scaleY * 0.25), p.sw + (p.sw * 0.5), p.sh + (p.sh * 0.5), p.x - (p.w * 0.25), p.y - (p.h * 0.25), p.w * 1.5, p.h * 1.5);
            puzzleCtx.stroke();
            puzzleCtx.restore();
            
            if (p === selectedPiece && !p.isLocked) {
                puzzleCtx.shadowColor = "rgba(0,0,0,0.3)";
                puzzleCtx.shadowBlur = 10;
                puzzleCtx.stroke();
                puzzleCtx.shadowBlur = 0;
            }
        }

        function onPuzzleDown(e) {
            e.preventDefault();
            const rect = puzzleCanvas.getBoundingClientRect();
            const mx = (e.clientX || e.touches[0].clientX) - rect.left;
            const my = (e.clientY || e.touches[0].clientY) - rect.top;

            for (let i = pieces.length - 1; i >= 0; i--) {
                let p = pieces[i];
                if (!p.isLocked && mx > p.x && mx < p.x + p.w && my > p.y && my < p.y + p.h) {
                    selectedPiece = p;
                    p.offsetX = mx - p.x; p.offsetY = my - p.y;
                    pieces.splice(i, 1); pieces.push(p);
                    drawPuzzle(); break;
                }
            }
        }

        function onPuzzleMove(e) {
            if (selectedPiece) {
                e.preventDefault();
                const rect = puzzleCanvas.getBoundingClientRect();
                const mx = (e.clientX || e.touches[0].clientX) - rect.left;
                const my = (e.clientY || e.touches[0].clientY) - rect.top;
                selectedPiece.x = mx - selectedPiece.offsetX;
                selectedPiece.y = my - selectedPiece.offsetY;
                drawPuzzle();
            }
        }

        function onPuzzleUp() {
            if (selectedPiece) {
                if (Math.abs(selectedPiece.x - selectedPiece.correctX) < SNAP_DISTANCE && Math.abs(selectedPiece.y - selectedPiece.correctY) < SNAP_DISTANCE) {
                    selectedPiece.x = selectedPiece.correctX; selectedPiece.y = selectedPiece.correctY; selectedPiece.isLocked = true;
                }
                selectedPiece = null; drawPuzzle(); checkWin();
            }
        }

        function checkWin() {
            const allLocked = pieces.every(p => p.isLocked);
            const alreadySolvedThisOne = solvedPuzzles.includes(currentPuzzleIndex);
            
            if (allLocked && !alreadySolvedThisOne) {
                puzzleCompleted();
            }
        }

        // --- FUNCI√ìN CLAVE ACTUALIZADA ---
        function puzzleCompleted() {
            solvedPuzzles.push(currentPuzzleIndex);
            
            const txtContainer = document.getElementById('resolution-text');
            const nextBtn = document.getElementById('next-puzzle-btn');
            const puzzleContainer = document.getElementById('puzzle-container');
            
            puzzleContainer.classList.add('solved');
            const message = resolucion_rompecabezas[currentPuzzleIndex - 1] || "¬°Completado!";
            txtContainer.innerText = message;
            txtContainer.classList.add('visible');

            // Verificamos si complet√≥ LOS 4
            if (solvedPuzzles.length === CANTIDAD_ROMPECABEZAS) {
                allPuzzlesFinished = true; // Bandera activada
                
                // CASO 1: 4 Puzzles + Tiempo Cumplido = ENTRAR
                if (isTimeReached) {
                    setTimeout(() => {
                        goToLockScreen();
                    }, 2000);
                } 
                // CASO 2: 4 Puzzles + Tiempo NO Cumplido = MOSTRAR FRASES
                else {
                    setTimeout(() => {
                        showFinalSummary();
                    }, 2000);
                }
            } else {
                // Si no complet√≥ los 4, mostramos el bot√≥n para seguir
                // (Independientemente del tiempo, para que pueda ver los 4 puzzles)
                nextBtn.classList.add('visible');
            }
        }

        function showFinalSummary() {
            // Ocultamos el juego y mostramos el resumen
            document.getElementById('puzzle-game-wrapper').style.display = 'none';
            const summaryContainer = document.getElementById('final-summary-container');
            const summaryList = document.getElementById('summary-list');
            
            // Llenamos la lista
            summaryList.innerHTML = '';
            resolucion_rompecabezas.forEach(frase => {
                const li = document.createElement('li');
                li.textContent = frase;
                summaryList.appendChild(li);
            });

            summaryContainer.style.display = 'flex';
        }

        /* =========================================
           RESTO DEL C√ìDIGO
           ========================================= */

        const quizData = [
            { q: "√çNDICE...?", a: ["mack"] },
            { q: "¬øQui√©n es la hagovera que mejor me cae?", a: ["nihon", "nihonbord", "exia", "yo"] },
            { q: "¬øCu√°l es el mejor mito griego existente?", a: ["orfeo", "euridice", "eur√≠dice", "orfeo y eur√≠dice", "orfeo y euridice"] },
            { q: "¬øQu√© tienen en comun las 4 resoluciones de rompecabezas?", a: ["borges", "borgianos", "jorge luis borges", "jlb" ] }
        ];

        const hints = [
            "Orden en el caos",
            "Nadie rebaje a l√°grima o reproche, esta declaraci√≥n de maestr√≠a...",
            "Entonces Orfeo compuso para ella la m√°s bella canci√≥n de amor que se hab√≠a o√≠do nunca en aquellos bosques.",
            "Ante la teor√≠a de las cuerdas, la teor√≠a de las sogas.",
            "Benjamin, pero amarillo (esto tiene otro significado)",
            "A veces no hace falta tener conclusiones.",
            "A veces la vida merece ser vivida",
            "El sentido es algo que buscamos y encontramos para que nos d√© seguridad porque vivir sin sentido es abrumador",
            "Todo tiene peso. En lo que decis al otro, en lo que decis al aire, y en lo que te decis a vos mismo. Lo que no dec√≠s, es peso muerto",
            "Tu naturaleza de hoy no est√° condenada a quedar inm√≥vil para siempre. Eso es existir.",
            "La libertad es poder elegir con qui√©n construir algo y cuidarlo. Es mirar al otro como un mundo, no como un servicio.",
            "Creer es lo mas importante que tenemos como humanos... Volver a lo humano loco. A creer, a confiar. Es salvar el mundo.",
            "Las mejores historias empiezan chiquito. Sin proezas.",
            "El dolor no necesita l√°mpara, se te escapa del cuerpo.",
            "Hay que darle lugar a la tristeza, saber habitarla, pero no perderse en ella.",
        ];

        let currentStep = 0;
        const targetDate = new Date('2025-11-23T00:00:00-03:00').getTime();
        let timerInterval; 

        window.onload = function() {
            initPuzzleSystem(); 
            initCountdown();
        };

        function showHint() {
            const hintDisplay = document.getElementById('hint-display');
            const randomIndex = Math.floor(Math.random() * hints.length);
            const selectedHint = hints[randomIndex];
            hintDisplay.style.opacity = '0';
            setTimeout(() => {
                hintDisplay.innerText = `"${selectedHint}"`;
                hintDisplay.style.opacity = '1';
            }, 300);
        }

        // Funci√≥n que verifica SIEMPRE si podemos pasar de pantalla
        function tryUnlock() {
            // Ahora la condici√≥n es estricta:
            // Debe haber terminado los 4 puzzles Y el tiempo debe haber pasado.
            if (allPuzzlesFinished && isTimeReached) {
                goToLockScreen();
            }
        }

        function goToLockScreen() {
            const countdownScreen = document.getElementById('countdown-screen');
            const lockScreen = document.getElementById('lock-screen');
            
            countdownScreen.style.opacity = '0';
            setTimeout(() => {
                countdownScreen.style.display = 'none';
                lockScreen.style.display = 'flex';
                setTimeout(() => { lockScreen.style.opacity = '1'; }, 50);
            }, 800);
        }

        async function initCountdown() {
            const syncStatus = document.getElementById('sync-status');
            let serverTimeReference;
            let localTimeReference;

            try {
                const response = await fetch('https://worldtimeapi.org/api/timezone/America/Argentina/Buenos_Aires');
                const data = await response.json();
                serverTimeReference = new Date(data.datetime).getTime();
                localTimeReference = performance.now();
                syncStatus.innerText = "Solo hace falta un poquito de paciencia";
                syncStatus.style.color = "#81c784";
            } catch (e) {
                console.warn("Fallo API de tiempo, usando local como fallback", e);
                syncStatus.innerText = "No hagas trampa eh";
                serverTimeReference = new Date().getTime();
                localTimeReference = performance.now();
            }

            timerInterval = setInterval(function() {
                const elapsed = performance.now() - localTimeReference;
                const currentRealTime = serverTimeReference + elapsed;
                const distance = targetDate - currentRealTime;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").innerText = String(Math.max(0, days)).padStart(2, '0');
                document.getElementById("hours").innerText = String(Math.max(0, hours)).padStart(2, '0');
                document.getElementById("minutes").innerText = String(Math.max(0, minutes)).padStart(2, '0');
                document.getElementById("seconds").innerText = String(Math.max(0, seconds)).padStart(2, '0');

                if (distance < 0) {
                    clearInterval(timerInterval);
                    isTimeReached = true;
                    document.querySelector('.countdown-title').innerText = "¬°TIEMPO CUMPLIDO!";
                    document.querySelector('.countdown-title').style.color = "#66bb6a";
                    
                    // Intentamos desbloquear. Si el usuario ya termin√≥ los 4 puzzles
                    // y estaba viendo el resumen, esto lo forzar√° a entrar.
                    tryUnlock();
                }
            }, 1000);
        }

        function checkAccess() {
            const input = document.getElementById('password');
            const errorMsg = document.getElementById('error-msg');
            const lockCard = document.getElementById('lock-card');
            const labelQuestion = document.getElementById('question-label');
            const stepText = document.getElementById('lock-step-text');
            
            const userAnswer = input.value.toLowerCase().trim();
            const validAnswers = quizData[currentStep].a;

            if (validAnswers.includes(userAnswer)) {
                errorMsg.style.opacity = '0';
                currentStep++;
                if (currentStep < quizData.length) {
                    labelQuestion.style.opacity = 0; 
                    stepText.innerText = `Paso ${currentStep + 1} de ${quizData.length}`;
                    setTimeout(() => {
                        labelQuestion.innerText = quizData[currentStep].q;
                        labelQuestion.style.opacity = 1;
                        input.value = ''; 
                        input.focus();
                    }, 300);
                } else {
                    unlockScreen();
                }
            } else {
                errorMsg.style.opacity = '1';
                lockCard.style.animation = 'none';
                lockCard.offsetHeight; 
                lockCard.style.animation = 'shake 0.5s';
                input.value = '';
                input.focus();
            }
        }

        function unlockScreen() {
            const lockScreen = document.getElementById('lock-screen');
            const introScreen = document.getElementById('intro-screen');
            const introText = document.getElementById('intro-text');
            const mainContent = document.getElementById('main-content');
            const emojiContainer = document.getElementById('emoji-container');

            lockScreen.style.opacity = '0';
            setTimeout(() => {
                lockScreen.style.display = 'none';
                introScreen.style.display = 'flex';
                introText.classList.add('animate-intro');
                triggerEmojiExplosion();

                setTimeout(() => {
                    introScreen.style.opacity = '0';
                    setTimeout(() => {
                        introScreen.style.display = 'none';
                        emojiContainer.innerHTML = ''; 
                        mainContent.style.display = 'block';
                        setTimeout(() => {
                            mainContent.style.opacity = '1';
                            initLibs(); 
                        }, 100);
                    }, 1000);
                }, 4000);
            }, 500); 
        }

        document.getElementById('password').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkAccess();
        });

        function triggerEmojiExplosion() {
            const emojiList = ['‚öõÔ∏è', 'üê±', 'üë∫', 'üìë', 'ü§ì', 'üìà', 'üìä'];
            const container = document.getElementById('emoji-container');
            const particleCount = 50; 

            for (let i = 0; i < particleCount; i++) {
                const emoji = document.createElement('div');
                emoji.classList.add('emoji-particle');
                emoji.innerText = emojiList[Math.floor(Math.random() * emojiList.length)];
                const angle = Math.random() * Math.PI * 2; 
                const velocity = 60 + Math.random() * 60; 
                const tx = Math.cos(angle) * velocity; 
                const ty = Math.sin(angle) * velocity; 

                emoji.style.setProperty('--tx', `${tx}vw`);
                emoji.style.setProperty('--ty', `${ty}vh`);
                const duration = 2 + Math.random() * 2; 
                emoji.style.animation = `explodeAnimation ${duration}s ease-out forwards`;
                emoji.style.fontSize = (1.5 + Math.random() * 2.5) + 'rem';
                container.appendChild(emoji);
            }
        }

        function initLibs() {
            AOS.init({ duration: 1200, once: true, offset: 100 });

            Chart.defaults.font.family = "'Nunito', sans-serif";
            Chart.defaults.color = '#5d5d5d';

            new Chart(document.getElementById('radarChart').getContext('2d'), {
                type: 'radar',
                data: {
                    labels: ['Ling√º√≠stica', 'L√≥gico-Mat', 'Empat√≠a', 'Sensibilidad', 'Maldad', 'Saltos de Fe', 'Pot. Autismo'],
                    datasets: [
                        { label: 'Exia', data: [85, 75, 92, 81, 73, 34, 76], fill: true, backgroundColor: 'rgba(179, 229, 252, 0.3)', borderColor: '#81d4fa', pointBackgroundColor: '#81d4fa' },
                        { label: 'Naxi', data: [85, 79, 92, 99, 32, 86, 77], fill: true, backgroundColor: 'rgba(255, 205, 210, 0.3)', borderColor: '#ef9a9a', pointBackgroundColor: '#ef9a9a' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 100 } } }
            });

            new Chart(document.getElementById('anxietyChart').getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['Pre-Encuentro', 'Llegada', 'Interacci√≥n', 'Actividades', 'Ausencia'],
                    datasets: [{ label: 'Ansiedad', data: [8, 7, 5, 3.5, 9], borderColor: '#b39ddb', backgroundColor: 'rgba(179, 157, 219, 0.2)', fill: true, tension: 0.4 }]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 10 } }, plugins: { legend: { display: true } } }
            });

            new Chart(document.getElementById('pieChart').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Cari√±o', 'Complicidad', 'Ternura', 'Miedo'],
                    datasets: [{ data: [47.1, 17.6, 11.8, 23.5], backgroundColor: ['#ffccbc', '#b2dfdb', '#f8bbd0', '#cfd8dc'], borderWidth: 2, borderColor: '#fff' }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right' } } }
            });
        }
    </script>
</body>
</html>
