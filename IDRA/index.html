<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso Restringido</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --bg-color: #fffcf8;
            --text-main: #5d5d5d;
            --text-title: #4a4a4a;
            --pastel-pink: #ffcdd2;
            --pastel-blue: #b3e5fc;
            --pastel-lavender: #e1bee7;
            --pastel-mint: #b2dfdb;
            --pastel-red: #ef5350;
            --card-shadow: 0 10px 30px rgba(225, 190, 231, 0.3);
            --correct-green: #a5d6a7;
            --highlight-cell: #fff59d; /* Amarillo suave para la celda clave */
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.8;
            overflow-x: hidden;
        }

        /* --- PANTALLA DE CUENTA REGRESIVA --- */
        #countdown-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20000;
            transition: opacity 0.8s ease;
            overflow-y: auto; 
            padding: 20px 0;
        }

        .countdown-card {
            text-align: center;
            padding: 40px;
            max-width: 800px; /* M√°s ancho para palabras largas */
            width: 95%;
            margin: auto;
        }

        .countdown-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 1.8rem;
            color: var(--text-title);
            margin-bottom: 30px;
        }

        .timer-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .time-box {
            background: #fff;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid var(--pastel-lavender);
            min-width: 80px;
        }

        .time-number {
            display: block;
            font-family: 'Quicksand', sans-serif;
            font-size: 2.5rem;
            font-weight: bold;
            color: #7e57c2;
            line-height: 1;
        }

        .time-label {
            font-size: 0.9rem;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .countdown-msg {
            color: var(--pastel-red);
            font-weight: bold;
            margin-bottom: 20px;
        }

        .sync-spinner {
            font-size: 0.8rem;
            color: #9fa8da;
            margin-bottom: 10px;
            font-style: italic;
            display: block;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .hint-btn, .game-btn {
            background: var(--pastel-mint);
            color: #00695c;
            border: none;
            padding: 10px 25px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            font-size: 0.95rem;
            box-shadow: 0 4px 10px rgba(178, 223, 219, 0.4);
            margin: 5px;
        }
        .game-btn {
            background: var(--pastel-lavender);
            color: #5e35b1;
            box-shadow: 0 4px 10px rgba(209, 196, 233, 0.4);
        }
        .hint-btn:hover, .game-btn:hover { transform: scale(1.05); filter: brightness(1.05); }
        
        .hint-text {
            margin-top: 20px;
            font-style: italic;
            color: #7986cb;
            min-height: 3em; 
            font-size: 1rem;
            padding: 0 20px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        /* --- ESTILOS DEL CRUCIGRAMA / ACR√ìSTICO --- */
        #crossword-section {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.8s ease-in-out, opacity 0.5s;
            opacity: 0;
            margin-top: 20px;
            width: 100%;
            text-align: left;
        }
        #crossword-section.open {
            max-height: 65vh; 
            opacity: 1;
            overflow-y: auto; 
            border-top: 2px dashed var(--pastel-pink);
            border-bottom: 2px dashed var(--pastel-pink);
            padding: 20px 0;
        }

        .cw-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px; /* Reducido un poco para que entren m√°s */
            flex-wrap: nowrap;
        }
        
        /* Espaciador visual para separar palabras */
        .cw-spacer {
            height: 20px;
            border-bottom: 1px dotted #e0e0e0;
            margin-bottom: 20px;
            width: 100%;
            position: relative;
        }

        .cw-def {
            flex: 1;
            font-size: 0.8rem;
            color: #666;
            padding-right: 15px;
            text-align: right;
            min-width: 140px;
            font-weight: 600;
        }

        .cw-word-container {
            display: flex;
            gap: 2px;
            justify-content: flex-start;
            flex: 2;
            overflow-x: auto; /* Scroll horizontal si la palabra es muy larga en m√≥vil */
            padding-bottom: 5px; /* Espacio para scrollbar si aparece */
        }
        
        /* Ocultar scrollbar fea en palabra */
        .cw-word-container::-webkit-scrollbar { height: 2px; }
        .cw-word-container::-webkit-scrollbar-thumb { background: #ddd; }

        .cw-cell {
            width: 26px; /* Un poco m√°s chico para palabras largas */
            height: 26px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9rem;
            background: white;
            color: #444;
            padding: 0;
            flex-shrink: 0; /* No encoger celdas */
        }

        .cw-cell:focus {
            outline: none;
            border-color: var(--pastel-lavender);
            background-color: #f3e5f5;
            z-index: 2;
        }

        .cw-cell.highlight {
            background-color: var(--highlight-cell);
            border-color: #fbc02d;
            border-width: 2px;
        }
        
        .cw-cell.correct-letter {
            color: #2e7d32;
            background-color: #e8f5e9; /* Un verde muy suave de fondo al resolver */
        }

        .secret-reveal {
            margin-top: 20px;
            padding: 20px;
            background: #fff;
            border-radius: 15px;
            font-family: 'Quicksand', sans-serif;
            color: #5e35b1;
            font-weight: 800;
            font-size: 1.2rem;
            display: none;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            animation: fadeIn 1s;
            border: 2px solid var(--pastel-lavender);
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Scrollbar custom para el crucigrama */
        #crossword-section::-webkit-scrollbar { width: 8px; }
        #crossword-section::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        #crossword-section::-webkit-scrollbar-thumb { background: var(--pastel-lavender); border-radius: 4px; }
        #crossword-section::-webkit-scrollbar-thumb:hover { background: #ce93d8; }

        /* --- PANTALLA DE BLOQUEO Y DEM√ÅS (Igual que antes) --- */
        #lock-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: none; 
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease, visibility 0.5s;
            opacity: 0;
        }
        
        .lock-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            text-align: center;
            max-width: 400px;
            width: 90%;
            border: 2px solid var(--pastel-lavender);
            animation: fadeIn 1s ease;
        }
        .lock-icon { font-size: 3rem; margin-bottom: 20px; color: var(--pastel-red); }
        .lock-title { font-family: 'Quicksand', sans-serif; font-weight: 700; color: var(--pastel-red); margin-bottom: 10px; letter-spacing: 1px; }
        .lock-question { font-family: 'Quicksand', sans-serif; font-size: 1.2rem; margin-bottom: 20px; color: var(--text-title); display: block; }
        .lock-input {
            width: 100%; padding: 15px; border: 2px solid var(--pastel-blue); border-radius: 10px;
            font-family: 'Nunito', sans-serif; font-size: 1rem; outline: none; text-align: center;
            margin-bottom: 20px; transition: border-color 0.3s; box-sizing: border-box;
        }
        .lock-input:focus { border-color: #81d4fa; }
        .lock-btn {
            background: var(--pastel-lavender); color: #5e35b1; border: none; padding: 12px 30px;
            border-radius: 50px; font-family: 'Quicksand', sans-serif; font-weight: bold; cursor: pointer;
            transition: transform 0.2s, background 0.2s; font-size: 1rem;
        }
        .lock-btn:hover { background: #d1c4e9; transform: scale(1.05); }
        .error-msg { color: var(--pastel-red); font-size: 0.9rem; margin-top: 10px; min-height: 20px; opacity: 0; transition: opacity 0.3s; }

        /* Intro y Main Content igual */
        #intro-screen { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #fff; display: none; justify-content: center; align-items: center; z-index: 9998; transition: opacity 1s ease; overflow: hidden; }
        .intro-text { font-family: 'Quicksand', sans-serif; font-size: 3rem; font-weight: 700; color: var(--text-title); text-align: center; opacity: 0; transform: translateY(30px); padding: 20px; line-height: 1.2; background: linear-gradient(45deg, #7e57c2, #ef5350); -webkit-background-clip: text; -webkit-text-fill-color: transparent; position: relative; z-index: 2; }
        @keyframes textReveal { 0% { opacity: 0; transform: translateY(30px) scale(0.9); } 20% { opacity: 1; transform: translateY(0) scale(1); } 80% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-30px) scale(1.1); } }
        .animate-intro { animation: textReveal 4s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        #emoji-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .emoji-particle { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); font-size: 2rem; opacity: 0; }
        @keyframes explodeAnimation { 0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; } 10% { opacity: 1; transform: translate(-50%, -50%) scale(1.5); } 100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1); opacity: 0; } }
        #main-content { display: none; opacity: 0; transition: opacity 1s ease; position: relative; z-index: 1; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25%, 75% { transform: translateX(-10px); } 50% { transform: translateX(10px); } }
        
        .background-shapes { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .shape { position: absolute; border-radius: 50%; opacity: 0.4; animation: float 20s infinite ease-in-out; }
        .s1 { width: 400px; height: 400px; background: var(--pastel-pink); top: -10%; left: -10%; }
        .s2 { width: 300px; height: 300px; background: var(--pastel-blue); bottom: 10%; right: -5%; animation-delay: -5s; }
        .s3 { width: 150px; height: 150px; background: var(--pastel-mint); top: 40%; right: 10%; animation-delay: -10s; }
        .s4 { width: 200px; height: 200px; background: var(--pastel-lavender); bottom: -50px; left: 20%; animation-delay: -15s; }
        @keyframes float { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-20px) scale(1.05); } }

        .container { max-width: 900px; margin: 0 auto; padding: 40px 20px; position: relative; z-index: 2; }
        header { text-align: center; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); padding: 40px; border-radius: 20px; box-shadow: var(--card-shadow); margin-bottom: 50px; border: 2px solid white; }
        h1 { font-family: 'Quicksand', sans-serif; font-size: 2.2rem; color: var(--text-title); margin-bottom: 10px; }
        .meta-data { font-size: 0.95rem; background: #fff; padding: 15px; border-radius: 10px; display: inline-block; margin-top: 15px; border: 1px solid var(--pastel-lavender); }
        .badge { display: inline-block; background: #ef5350; color: white; padding: 4px 12px; border-radius: 50px; font-size: 0.8rem; font-weight: bold; letter-spacing: 1px; margin-bottom: 15px; }
        section { background: rgba(255, 255, 255, 0.9); padding: 35px; margin-bottom: 35px; border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.02); border: 1px solid rgba(255,255,255,0.6); transition: transform 0.3s; }
        section:hover { transform: translateY(-3px); }
        h2 { font-family: 'Quicksand', sans-serif; color: var(--text-title); border-bottom: 3px solid var(--pastel-mint); display: inline-block; padding-bottom: 5px; margin-top: 0; }
        h3 { font-family: 'Quicksand', sans-serif; color: #7e57c2; margin-top: 25px; }
        p { margin-bottom: 15px; text-align: justify; }
        strong { color: #5c6bc0; }
        .item-list { list-style: none; padding: 0; }
        .item-list li { margin-bottom: 20px; padding-left: 20px; border-left: 4px solid var(--pastel-pink); background: linear-gradient(to right, rgba(255, 205, 210, 0.1), transparent); padding: 15px; border-radius: 0 10px 10px 0; }
        .table-wrapper { overflow-x: auto; margin: 20px 0; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; background: white; min-width: 600px; }
        th { background-color: var(--pastel-lavender); color: #5e35b1; padding: 12px; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        tr:hover { background-color: #f9f9f9; }
        .chart-box { background: #fff; padding: 20px; border-radius: 15px; margin: 30px 0; box-shadow: inset 0 0 20px rgba(225, 190, 231, 0.1); border: 1px solid var(--pastel-blue); position: relative; height: 400px; display: flex; justify-content: center; align-items: center; }
        .chart-box.small { max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; }
        .signature-section { margin-top: 60px; text-align: right; padding: 30px; background: linear-gradient(135deg, #fff, var(--pastel-pink)); border-radius: 20px; border: 1px solid var(--pastel-pink); }
        .signature-text { font-family: 'Quicksand', sans-serif; font-weight: bold; font-size: 1.2rem; color: #c62828; }
        
        @media (max-width: 600px) {
            .intro-text { font-size: 1.8rem; }
            h1 { font-size: 1.5rem; }
            .time-box { min-width: 60px; padding: 10px; }
            .time-number { font-size: 1.8rem; }
            .cw-cell { width: 22px; height: 22px; font-size: 0.8rem; }
            .cw-def { font-size: 0.7rem; min-width: 90px; }
        }
    </style>
</head>
<body>

    <div id="countdown-screen">
        <div class="countdown-card">
            <div class="lock-icon">‚è≥</div>
            <h2 class="countdown-title">El acceso a este SECRETO estar√° disponible el Domingo 23/11/2025</h2>
            <span class="sync-spinner" id="sync-status">Sincronizando reloj global...</span>
            
            <div class="timer-container">
                <div class="time-box">
                    <span class="time-number" id="days">00</span>
                    <span class="time-label">D√≠as</span>
                </div>
                <div class="time-box">
                    <span class="time-number" id="hours">00</span>
                    <span class="time-label">Horas</span>
                </div>
                <div class="time-box">
                    <span class="time-number" id="minutes">00</span>
                    <span class="time-label">Min</span>
                </div>
                <div class="time-box">
                    <span class="time-number" id="seconds">00</span>
                    <span class="time-label">Seg</span>
                </div>
            </div>
            
            <p class="countdown-msg">Paciencia, Exia...</p>

            <div class="action-buttons">
                <button class="hint-btn" onclick="showHint()">Decime algo mientras tanto</button>
                <button class="game-btn" onclick="toggleCrossword()">Intentar conseguir la llave</button>
            </div>
            
            <div id="hint-display" class="hint-text"></div>

            <!-- ACR√ìSTICO SECCI√ìN -->
            <div id="crossword-section">
                <p style="text-align: center; color: #7986cb; margin-bottom: 20px; font-size: 0.9rem;">
                    La vertical iluminada contiene el mensaje. <br>
                    <small>Se aceptan respuestas sin tildes.</small>
                </p>
                <div id="crossword-container">
                    <!-- JS generar√° las filas aqu√≠ -->
                </div>

                <div id="secret-message" class="secret-reveal"></div>
            </div>

        </div>
    </div>

    <div id="lock-screen">
        <div class="lock-card" id="lock-card">
            <div class="lock-icon">üîí</div>
            <h2 class="lock-title">CONFIDENCIALIDAD M√ÅXIMA</h2>
            <p id="lock-step-text">Paso 1 de 4</p>
            <label class="lock-question" id="question-label" for="password">¬ø√çndice...?</label>
            <input type="password" id="password" class="lock-input" placeholder="Ingrese respuesta">
            <button class="lock-btn" onclick="checkAccess()">Confirmar</button>
            <div class="error-msg" id="error-msg">Respuesta Incorrecta</div>
        </div>
    </div>

    <div id="intro-screen">
        <h1 class="intro-text" id="intro-text">INFORME DE RELEVAMIENTO AFECTIVO</h1>
        <div id="emoji-container"></div>
    </div>

    <div id="main-content">
        <div class="background-shapes">
            <div class="shape s1"></div>
            <div class="shape s2"></div>
            <div class="shape s3"></div>
            <div class="shape s4"></div>
        </div>

        <div class="container">
            <header data-aos="fade-down" data-aos-duration="1000">
                <div class="badge">CONFIDENCIAL / VULNERABILIDAD ALTA</div>
                <h1>INFORME DE RELEVAMIENTO AFECTIVO</h1>
                <div class="meta-data">
                    <p style="margin: 5px 0; text-align: center;"><strong>Autor:</strong> Ignacio Snieg (a.k.a. Naxi/Data/Otto)</p>
                    <p style="margin: 5px 0; text-align: center;"><strong>Para:</strong> Laura Antmann (a.k.a. Exia/Nihon/Korelina)</p>
                    <p style="margin: 5px 0; text-align: center;"><strong>Fecha:</strong> Noviembre, 2025</p>
                </div>
            </header>

            <section data-aos="fade-up">
                <h2>1. RESUMEN</h2>
                <p>El presente documento tiene como objetivo desglosar, analizar y validar la fenomenolog√≠a interna del sujeto Naxi respecto al v√≠nculo con el sujeto Exia. Tras los eventos recientes y en concordancia con la profundidad que ha adquirido el v√≠nculo a lo largo de estos meses, se ha detectado una anomal√≠a en las categor√≠as relacionales convencionales. La hip√≥tesis central sostiene que lo que Naxi experimenta internamente no se ajusta a la definici√≥n de "Amistad tradicional" ni a la de "Atracci√≥n rom√°ntica/sexual", sino que habita un espectro dis√≠mil de alta intensidad y resonancia. Para evitar presunciones esquizoides a partir de ahora Naxi, que es quien suscribe, continuar√° escribiendo el ensayo en primera persona.</p>
            </section>
            
             <section data-aos="fade-up">
                <h2>2. DELIMITACI√ìN DEL ESPECTRO (LO QUE NO ES)</h2>
                <p>No quiero que te asustes. Intentar√© ser lo m√°s claro y honesto posible a la vez que realista. Esto no es (o no quiere ser) una declaraci√≥n en el sentido de una b√∫squeda donde la amistad debe romperse debido a que pasan otras cosas que la hacen obsoleta. M√°s bien es poner en palabras y orden aquello que siento que me est√° pasando para intentar construir juntos a donde creemos que esto deber√≠a ir. Me encanta la amistad que tenemos, me encanta compartir tiempo con vos. Siento esto muy especial y por eso, creo que es necesario delimitar ciertas nociones. Para entender la entidad de lo que me pasa, primero es necesario despejar las variables que suelen generar ruido en el an√°lisis convencional y que, dada mi historia (demisexualidad), podr√≠an prestarse a confusi√≥n:</p>
                <ul class="item-list">
                    <li><strong>Ausencia de la Variable Er√≥tica:</strong> No detecto en mi sistema un impulso de naturaleza f√≠sico-er√≥tica. No encuentro destellos de l√≠bido. No hay una b√∫squeda de contacto sexual, sino de contacto vital.</li>
                    <li><strong>Ausencia de la Variable Rom√°ntica Tradicional:</strong> No estoy atravesando la t√≠pica ansiedad de un cortejo. Ser√≠a extremadamente clich√©, un tropo del cual los mangas que lees y traduc√≠s hacen un uso extensivo. Lo que me pasa con vos corre por un carril paralelo que no est√° definido por l√≥gicas convencionales y tradicionales que necesitan inequ√≠vocamente definir las categor√≠as humanas en un compartimento.</li>
                    <li><strong>No es una amistad trampol√≠n:</strong> Como bien sabes, en mi abordaje demisexual de los v√≠nculos me es completamente necesario construir una amistad consolidada antes de que la atracci√≥n por alguien aparezca. Sin embargo, no siento que eso es lo que est√© pasando en este momento. En mi coraz√≥n, la amistad que tenemos en este momento es preciosa e invaluable. Me siento muy feliz y c√≥modo de vivirla de esta manera, sin embargo siento que comienza a encontrar los l√≠mites que se acercan al umbral donde la categor√≠a de amistad (con el subeje calificativo: convencional) empieza a quedarse peque√±a.</li>
                </ul>
            </section>
            
            <section data-aos="fade-up">
                <h2>3. AN√ÅLISIS DE RESONANCIA</h2>
                <p>Est√° comprobado que hay √°reas de contacto en nuestra naturaleza. Hay v√©rtices que en sus picos y valles logran acompa√±arse en una clave de onda que resulta compatible. Esto ha facilitado el camino para lograr la profundizaci√≥n actual, sin embargo tambi√©n genera incertidumbres en mi pensamiento de hacia donde desemboca.</p>
                 <div class="chart-box">
                    <canvas id="radarChart"></canvas>
                </div>
            </section>
            
            <section data-aos="fade-up">
                 <h2>6. PROPUESTA OPERATIVA</h2>
                 <p>Mi objetivo no es llegar a un resultado binario (0 o 1), sino mantenernos en este estado cu√°ntico donde la probabilidad de hacernos bien tiende al infinito.</p>
                 <div class="signature-section">
                    <div class="signature-text">Firma: Naxi</div>
                </div>
            </section>
        </div>
    </div>
    
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // --- DATOS DEL ACR√ìSTICO (Nivel Avanzado) ---
        // Frase vertical: FORMAS PARTE DE MIS SECRETOS MEJOR GUARDADOS
        
        const acrosticData = [
            // F-O-R-M-A-S
            { word: "FILANTROPIA", def: "Amor al g√©nero humano", index: 0 },
            { word: "MONOBLOQUE", def: "Configuraci√≥n de una sola persona (a veces dos o tres) cuyo √∫nico objetivo es la trinchera de la paz hagovera", index: 1 },
            { word: "ONEROSO", def: "Que implica gastos o molestias", index: 3 },
            { word: "RUMIA", def: "Pesado, molesto, gravoso. Que ocasiona gasto", index: 2 },
            { word: "INEFABLE", def: "Que no se puede explicar con palabras", index: 4 },
            { word: "SIDE", def: "Vos. Acusasiones de tu naturaleza (fundadas) ", index: 0 },
            
            { spacer: true }, // ESPACIO
            
            // P-A-R-T-E
            { word: "PROSAICO", def: "Insulso, vulgar, sin poes√≠a", index: 0 },
            { word: "APOLO", def: "Felino naranja, conocido por morder y acosar", index: 0 },
            { word: "SINERGIA", def: "Acci√≥n conjunta superior a la suma", index: 4 },
            { word: "TECNOCRISTIANISMO", def: "Evangelismo casi rebordeano del siglo XXI", index: 0 },
            { word: "PERENNE", def: "Continuo, incesante", index: 6 },
            
            { spacer: true }, // ESPACIO

            // D-E
            { word: "DESPEJADA", def: "Estado promedio de M en el √≠ndice de Exia (femenino)", index: 0 },
            { word: "QUIMERA", def: "Ilusi√≥n producto de la imaginaci√≥n", index: 4 },
            
            { spacer: true }, // ESPACIO

            // M-I-S
            { word: "MACK", def: "Sistema de medici√≥n humano de cuatro √≥rdenes exclusivo de naxi y exia", index: 0 },
            { word: "CRISTINA", def: "Ex-presidenta. Psic√≥loga", index: 2 },
            { word: "INTROSPECCION", def: "Mirada interior a los propios actos", index: 5 },
            
            { spacer: true }, // ESPACIO

            // S-E-C-R-E-T-O-S
            { word: "ESTOFADO", def: "Plato estrella de Naxi", index: 1 },
            { word: "INELUCTABLE", def: "Cosa que es inevitable y contra la cual no se puede luchar.", index: 2 },
            { word: "COWORKING", def: "Actividad de trabajar juntos a distancia.", index: 0 },
            { word: "RESONANCIA", def: "Fen√≥meno f√≠sico que ocurre cuando las frecuencias se encuentran (no es similitud, es movimiento)", index: 0 },
            { word: "EPITETO", def: "Adjetivo que subraya una cualidad", index: 4 },
            { word: "PALITO", def: "Michi naranja, experto en desordenar camas y tirar cubos Rubik.", index: 4 },
            { word: "AXIOMA", def: "Verdad evidente que no necesita demostraci√≥n", index: 3 },
            { word: "SOLIPSISMO", def: "Creencia de que solo existe la propia mente", index: 0 },
            
            { spacer: true }, // ESPACIO

            // M-E-J-O-R
            { word: "METAFISICA", def: "Filosof√≠a que trata del ser", index: 0 },
            { word: "HERMENEUTICA", def: "Arte de interpretaci√≥n de los textos, originalmente los sagrados.", index: 1 },
            { word: "OBJETIVAMENTE", def: "Muletilla que us√°s para dar opiniones que son, claramente, subjetivas.", index: 2},
            { word: "DATAMOVIL", def: "Veh√≠culo fiel seg√∫n yo. Segun vos se rompe todo el tiempo. Siempre est√° mal estacionado", index: 5},
            { word: "CURSI", def: "Quizas la palabra que mejor me define.", index: 2 },
            
            { spacer: true }, // ESPACIO

            // G-U-A-R-D-A-D-O-S
            { word: "GUNDAM", def: "Vos", index: 0 },
            { word: "ELOCUENCIA", def: "Facultad de hablar con eficacia", index: 4 },
            { word: "ATARAXIA", def: "Imperturbabilidad, serenidad", index: 4 },
            { word: "RAMEN", def: "Comida japonesa degustada en Fukuro; debut gastron√≥mico para Naxi.", index: 0 },
            { word: "IDIOSINCRASIA", def: "Conjunto de ideas, comportamientos, actitudes particulares o propios de un individuo, grupo o colectivo humano", index: 1 },
            { word: "FALACIA", def: "Enga√±o o mentira escondida", index: 3 },
            { word: "PARADIGMA", def: "Teor√≠a aceptada como modelo", index: 4 },
            { word: "AFFOGATO", def: "Postre italiano que me has recomendado varias veces.", index: 3 },
            { word: "SOFISMA", def: "Raz√≥n aparente para defender lo falso", index: 4 }
        ];

        // --- RENDERIZADO DEL CRUCIGRAMA ---
        function renderCrossword() {
            const container = document.getElementById('crossword-container');
            container.innerHTML = '';
            
            let realRowIndex = 0; // Para llevar cuenta de las filas con inputs

            acrosticData.forEach((item) => {
                if (item.spacer) {
                    const spacer = document.createElement('div');
                    spacer.className = 'cw-spacer';
                    container.appendChild(spacer);
                    return;
                }

                const rowDiv = document.createElement('div');
                rowDiv.className = 'cw-row';

                // Definici√≥n
                const defDiv = document.createElement('div');
                defDiv.className = 'cw-def';
                defDiv.innerText = `${realRowIndex + 1}. ${item.def}`;
                rowDiv.appendChild(defDiv);

                // Celdas
                const wordDiv = document.createElement('div');
                wordDiv.className = 'cw-word-container';
                
                for (let i = 0; i < item.word.length; i++) {
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.className = 'cw-cell';
                    input.maxLength = 1;
                    input.dataset.row = realRowIndex;
                    input.dataset.col = i;
                    input.dataset.letter = item.word[i]; 

                    if (i === item.index) {
                        input.classList.add('highlight');
                    }

                    // Evento Input
                    input.addEventListener('input', function(e) {
                        // Normalizar a may√∫sculas y quitar tildes para validaci√≥n visual
                        let val = this.value.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                        this.value = val; 

                        if (val === this.dataset.letter) {
                            this.classList.add('correct-letter');
                        } else {
                            this.classList.remove('correct-letter');
                        }

                        // Auto-focus siguiente
                        if (this.value.length === 1) {
                            let next = this.nextElementSibling;
                            if (next) {
                                next.focus();
                            } else {
                                // Buscar siguiente fila real (saltando spacers)
                                let nextRowIdx = parseInt(this.dataset.row) + 1;
                                let nextRowInput = document.querySelector(`input[data-row="${nextRowIdx}"][data-col="0"]`);
                                if (nextRowInput) nextRowInput.focus();
                            }
                        }
                        
                        checkWinCondition();
                    });

                    // Backspace navegaci√≥n
                    input.addEventListener('keydown', function(e) {
                        if (e.key === 'Backspace' && this.value === '') {
                            let prev = this.previousElementSibling;
                            if (prev) prev.focus();
                        }
                    });

                    wordDiv.appendChild(input);
                }
                rowDiv.appendChild(wordDiv);
                container.appendChild(rowDiv);
                realRowIndex++;
            });
        }

        function checkWinCondition() {
            const highlighted = document.querySelectorAll('.cw-cell.highlight');
            let allCorrect = true;
            
            highlighted.forEach(cell => {
                if (cell.value !== cell.dataset.letter) allCorrect = false;
            });

            if (allCorrect) {
                const msg = document.getElementById('secret-message');
                msg.innerText = 'üóùÔ∏è "Lo de arriba es la llave, no la pierdas" üóùÔ∏è';
                msg.style.display = 'block';
                // Scroll al mensaje
                msg.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function toggleCrossword() {
            const section = document.getElementById('crossword-section');
            const btn = document.querySelector('.game-btn');
            section.classList.toggle('open');
            
            if (section.classList.contains('open')) {
                btn.textContent = "Ocultar Desaf√≠o";
                if (document.getElementById('crossword-container').children.length === 0) {
                    renderCrossword();
                }
            } else {
                btn.textContent = "Intentar conseguir la llave";
            }
        }

        // --- C√ìDIGO EXISTENTE (Restaurado para funcionalidad completa) ---
        const quizData = [
            { q: "√çNDICE...?", a: ["mack"] },
            { q: "¬øQui√©n es la hagovera que mejor me cae?", a: ["nihon", "nihonbord", "exia", "yo"] },
            { q: "¬øCu√°l es el mejor mito griego existente?", a: ["orfeo", "euridice", "eur√≠dice", "orfeo y euridice"] },
            { q: "¬øQu√© tienen en comun las 4 resoluciones de rompecabezas?", a: ["borges", "borgianos", "jorge luis borges", "jlb" ] }
        ];

        const hints = [
            "Orden en el caos",
            "Nadie rebaje a l√°grima o reproche...",
            "Entonces Orfeo compuso para ella la m√°s bella canci√≥n...",
            "Ante la teor√≠a de las cuerdas, la teor√≠a de las sogas.",
            "Benjamin, pero amarillo",
            "A veces no hace falta tener conclusiones.",
            "El dolor no necesita l√°mpara, se te escapa del cuerpo."
        ];

        let currentStep = 0;
        const targetDate = new Date('2025-11-23T00:00:00-03:00').getTime();
        let timerInterval; 

        window.onload = function() {
            initCountdown();
            initLibs(); // Init charts si est√°n visibles (lo estar√°n despues)
        };

        function showHint() {
            const hintDisplay = document.getElementById('hint-display');
            const randomIndex = Math.floor(Math.random() * hints.length);
            hintDisplay.style.opacity = '0';
            setTimeout(() => {
                hintDisplay.innerText = `"${hints[randomIndex]}"`;
                hintDisplay.style.opacity = '1';
            }, 300);
        }

        // --- FUNCIONES DE ACCESO / CHEATS ---

        window.accesoMaestro = function() {
            const secret = prompt("Acceso Maestro:");
            if (secret === "432843284328") {
                clearInterval(timerInterval);
                goToLockScreen();
            }
        }

        // FUNCI√ìN NUEVA SOLICITADA
        window.resolverCruci = function() {
            // 1. Abrir el crucigrama si no est√° visible
            const section = document.getElementById('crossword-section');
            if (!section.classList.contains('open')) {
                toggleCrossword();
            }

            // Peque√±o timeout para asegurar que el DOM se renderiz√≥ si estaba cerrado
            setTimeout(() => {
                const inputs = document.querySelectorAll('.cw-cell');
                if (inputs.length === 0) {
                    console.error("El crucigrama no se ha renderizado a√∫n.");
                    return;
                }

                // 2. Recorrer inputs y llenarlos con la data correcta
                inputs.forEach(input => {
                    // La letra correcta est√° guardada en el dataset.letter
                    if (input.dataset.letter) {
                        input.value = input.dataset.letter;
                        input.classList.add('correct-letter'); // Feedback visual verde
                    }
                });

                // 3. Validar la condici√≥n de victoria
                checkWinCondition();
                console.log("‚ú® Crucigrama resuelto con magia ‚ú®");

            }, 100);
        }

        function goToLockScreen() {
            document.getElementById('countdown-screen').style.display = 'none';
            const lock = document.getElementById('lock-screen');
            lock.style.display = 'flex';
            setTimeout(() => lock.style.opacity = '1', 50);
        }

        async function initCountdown() {
            const syncStatus = document.getElementById('sync-status');
            let serverTimeReference, localTimeReference;

            try {
                const response = await fetch('https://worldtimeapi.org/api/timezone/America/Argentina/Buenos_Aires');
                const data = await response.json();
                serverTimeReference = new Date(data.datetime).getTime();
                localTimeReference = performance.now();
                syncStatus.innerText = "Solo hace falta un poquito de paciencia";
                syncStatus.style.color = "#81c784";
            } catch (e) {
                serverTimeReference = new Date().getTime();
                localTimeReference = performance.now();
                syncStatus.innerText = "Usando hora local...";
            }

            timerInterval = setInterval(function() {
                const elapsed = performance.now() - localTimeReference;
                const currentRealTime = serverTimeReference + elapsed;
                const distance = targetDate - currentRealTime;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").innerText = String(Math.max(0, days)).padStart(2, '0');
                document.getElementById("hours").innerText = String(Math.max(0, hours)).padStart(2, '0');
                document.getElementById("minutes").innerText = String(Math.max(0, minutes)).padStart(2, '0');
                document.getElementById("seconds").innerText = String(Math.max(0, seconds)).padStart(2, '0');

                if (distance < 0) {
                    clearInterval(timerInterval);
                    goToLockScreen(); 
                }
            }, 1000);
        }

        function checkAccess() {
            const input = document.getElementById('password');
            const errorMsg = document.getElementById('error-msg');
            const userAnswer = input.value.toLowerCase().trim();
            const validAnswers = quizData[currentStep].a;

            if (validAnswers.includes(userAnswer)) {
                errorMsg.style.opacity = '0';
                currentStep++;
                if (currentStep < quizData.length) {
                    document.getElementById('question-label').innerText = quizData[currentStep].q;
                    document.getElementById('lock-step-text').innerText = `Paso ${currentStep + 1} de ${quizData.length}`;
                    input.value = ''; input.focus();
                } else {
                    unlockScreen();
                }
            } else {
                errorMsg.style.opacity = '1';
                input.value = ''; input.focus();
            }
        }

        function unlockScreen() {
            const lockScreen = document.getElementById('lock-screen');
            const introScreen = document.getElementById('intro-screen');
            const mainContent = document.getElementById('main-content');
            
            lockScreen.style.opacity = '0';
            setTimeout(() => {
                lockScreen.style.display = 'none';
                introScreen.style.display = 'flex';
                document.getElementById('intro-text').classList.add('animate-intro');
                
                setTimeout(() => {
                    introScreen.style.opacity = '0';
                    setTimeout(() => {
                        introScreen.style.display = 'none';
                        mainContent.style.display = 'block';
                        setTimeout(() => {
                            mainContent.style.opacity = '1';
                            // Re-inicializar graficos si AOS destruy√≥ layout
                            initLibs();
                        }, 100);
                    }, 1000);
                }, 4000);
            }, 500);
        }

        function initLibs() {
            AOS.init({ duration: 1200, once: true });
            Chart.defaults.font.family = "'Nunito', sans-serif";
            
            const ctx1 = document.getElementById('radarChart');
            if(ctx1) {
                new Chart(ctx1.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['Ling√º√≠stica', 'L√≥gico-Mat', 'Empat√≠a', 'Sensibilidad', 'Maldad', 'Saltos de Fe', 'Pot. Autismo'],
                        datasets: [
                            { label: 'Exia', data: [85, 75, 92, 81, 73, 34, 76], fill: true, backgroundColor: 'rgba(179, 229, 252, 0.3)', borderColor: '#81d4fa' },
                            { label: 'Naxi', data: [85, 79, 92, 99, 32, 86, 77], fill: true, backgroundColor: 'rgba(255, 205, 210, 0.3)', borderColor: '#ef9a9a' }
                        ]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 100 } } }
                });
            }
        }
    </script>
</body>
</html>
